"use strict";(self.webpackChunkmebiusbox_docusaurus=self.webpackChunkmebiusbox_docusaurus||[]).push([[8650],{8715:e=>{e.exports=JSON.parse('{"permalink":"/en/blog/2025/05/03/mdbook-private","source":"@site/blog/2025/05-03-mdbook-private.md","title":"mdBook\u3067\u4e00\u90e8\u3092\u975e\u516c\u958b\u306b\u3059\u308b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3092\u4f5c\u308b","description":"\u516c\u958b\u3057\u305f\u304f\u306a\u3044\u5185\u5bb9\u3092\u30d3\u30eb\u30c9\u6642\u306b\u9664\u5916\u3059\u308b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306b\u3064\u3044\u3066","date":"2025-05-03T00:00:00.000Z","tags":[{"inline":true,"label":"mdBook","permalink":"/en/blog/tags/md-book"}],"readingTime":9.68,"hasTruncateMarker":true,"authors":[{"name":"mebiusbox","title":"engineer","url":"https://github.com/mebiusbox","imageURL":"https://github.com/mebiusbox.png","key":"mebiusbox","page":null}],"frontMatter":{"title":"mdBook\u3067\u4e00\u90e8\u3092\u975e\u516c\u958b\u306b\u3059\u308b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3092\u4f5c\u308b","description":"\u516c\u958b\u3057\u305f\u304f\u306a\u3044\u5185\u5bb9\u3092\u30d3\u30eb\u30c9\u6642\u306b\u9664\u5916\u3059\u308b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306b\u3064\u3044\u3066","keywords":["mdBook"],"category":"note","authors":["mebiusbox"],"tags":["mdBook"],"image":"https://og-image-mebiusbox.vercel.app/api/og?title=mdBook%e3%81%a7%e4%b8%80%e9%83%a8%e3%82%92%e9%9d%9e%e5%85%ac%e9%96%8b%e3%81%ab%e3%81%99%e3%82%8b%e3%83%97%e3%83%aa%e3%83%97%e3%83%ad%e3%82%bb%e3%83%83%e3%82%b5%e3%82%92%e4%bd%9c%e3%82%8b&subtitle=%e5%85%ac%e9%96%8b%e3%81%97%e3%81%9f%e3%81%8f%e3%81%aa%e3%81%84%e5%86%85%e5%ae%b9%e3%82%92%e3%83%93%e3%83%ab%e3%83%89%e6%99%82%e3%81%ab%e9%99%a4%e5%a4%96%e3%81%99%e3%82%8b%e3%83%97%e3%83%aa%e3%83%97%e3%83%ad%e3%82%bb%e3%83%83%e3%82%b5%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6&date=2025%2F05%2F03&tags=mdBook"},"unlisted":false,"prevItem":{"title":"mise\u306b\u5207\u308a\u66ff\u3048\u307e\u3057\u305f","permalink":"/en/blog/2025/06/30/mise"},"nextItem":{"title":"Visual Studio Code\u306eC#\u30d5\u30a9\u30fc\u30de\u30c3\u30bf\u8a2d\u5b9a","permalink":"/en/blog/2025/04/17/csharp-formatter-for-vscode"}}')},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var o=t(96540);const r={},s=o.createContext(r);function i(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}},46250:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var o=t(8715),r=t(74848),s=t(28453);const i={title:"mdBook\u3067\u4e00\u90e8\u3092\u975e\u516c\u958b\u306b\u3059\u308b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3092\u4f5c\u308b",description:"\u516c\u958b\u3057\u305f\u304f\u306a\u3044\u5185\u5bb9\u3092\u30d3\u30eb\u30c9\u6642\u306b\u9664\u5916\u3059\u308b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306b\u3064\u3044\u3066",keywords:["mdBook"],category:"note",authors:["mebiusbox"],tags:["mdBook"],image:"https://og-image-mebiusbox.vercel.app/api/og?title=mdBook%e3%81%a7%e4%b8%80%e9%83%a8%e3%82%92%e9%9d%9e%e5%85%ac%e9%96%8b%e3%81%ab%e3%81%99%e3%82%8b%e3%83%97%e3%83%aa%e3%83%97%e3%83%ad%e3%82%bb%e3%83%83%e3%82%b5%e3%82%92%e4%bd%9c%e3%82%8b&subtitle=%e5%85%ac%e9%96%8b%e3%81%97%e3%81%9f%e3%81%8f%e3%81%aa%e3%81%84%e5%86%85%e5%ae%b9%e3%82%92%e3%83%93%e3%83%ab%e3%83%89%e6%99%82%e3%81%ab%e9%99%a4%e5%a4%96%e3%81%99%e3%82%8b%e3%83%97%e3%83%aa%e3%83%97%e3%83%ad%e3%82%bb%e3%83%83%e3%82%b5%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6&date=2025%2F05%2F03&tags=mdBook"},c=void 0,a={authorsImageUrls:[void 0]},d=[{value:"mdbook-private",id:"mdbook-private",level:2},{value:"\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u5229\u7528",id:"\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u5229\u7528",level:3},{value:"\u3072\u306a\u5f62",id:"\u3072\u306a\u5f62",level:3},{value:"\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5148\u982d\u304c\u30a2\u30f3\u30c0\u30fc\u30b9\u30b3\u30a2\uff08<code>_</code>\uff09\u306a\u3089\u9664\u5916",id:"\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5148\u982d\u304c\u30a2\u30f3\u30c0\u30fc\u30b9\u30b3\u30a2_\u306a\u3089\u9664\u5916",level:3},{value:"Front Matter\u3067\u975e\u516c\u958b\u3092\u5236\u5fa1\u3059\u308b",id:"front-matter\u3067\u975e\u516c\u958b\u3092\u5236\u5fa1\u3059\u308b",level:2},{value:"\u30b3\u30f3\u30c6\u30f3\u30c4\u5185\u306e\u4e00\u90e8\u3092\u975e\u516c\u958b\u306b\u3059\u308b",id:"\u30b3\u30f3\u30c6\u30f3\u30c4\u5185\u306e\u4e00\u90e8\u3092\u975e\u516c\u958b\u306b\u3059\u308b",level:3},{value:"\u30aa\u30d7\u30b7\u30e7\u30f3\u6a5f\u80fd",id:"\u30aa\u30d7\u30b7\u30e7\u30f3\u6a5f\u80fd",level:3},{value:"\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u5b9f\u884c\u9806\u756a",id:"\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u5b9f\u884c\u9806\u756a",level:3},{value:"\u5b9f\u884c\u6642\u306b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3059\u308b",id:"\u5b9f\u884c\u6642\u306b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3059\u308b",level:3}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"mdBook\u3067\u751f\u6210\u3057\u305fWeb\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u516c\u958b\u3059\u308b\u5fc5\u8981\u304c\u3042\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u4e00\u90e8\u306e\u5185\u5bb9\u306f\u516c\u958b\u3057\u305f\u304f\u306a\u3044\u3082\u306e\u304c\u3042\u308a\u307e\u3057\u305f\uff0e\n\u672c\u8a18\u4e8b\u3067\u306f\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3092\u4f5c\u6210\u3057\u3066\u5b9f\u73fe\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\uff0e"}),"\n",(0,r.jsxs)(n.p,{children:["mdBook\u3067\u306f\u30de\u30fc\u30af\u30c0\u30a6\u30f3\u65b9\u5f0f\u3067\u8a18\u8ff0\u3057\u305f\u5185\u5bb9\u3092\u9759\u7684Web\u30b3\u30f3\u30c6\u30f3\u30c4\u306b\u30d3\u30eb\u30c9\u3057\u307e\u3059\uff0e\u901a\u5e38\u306f ",(0,r.jsx)(n.code,{children:"src"})," \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u542b\u307e\u308c\u3066\u3044\u308b ",(0,r.jsx)(n.code,{children:"SUMMARY.md"})," \u3092\u30eb\u30fc\u30c8\u3068\u3057\u3066\u6728\u69cb\u9020\u3067\u69cb\u7bc9\u3057\u307e\u3059\uff0e\u4eca\u56de\u306f\u3001\u9664\u5916\u5bfe\u8c61\u3068\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u5358\u4f4d\u3001\u307e\u305f\u306f\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u4e00\u90e8\u3092\u516c\u958b\u7528\u30d3\u30eb\u30c9\u3057\u305f\u3068\u304d\u306b\u9664\u5916\u3057\u307e\u3059\uff0e\u307e\u305f\u3001\u975e\u516c\u958b\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304d\u306f\u9664\u5916\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.p,{children:"\u9664\u5916\u3059\u308b\u305f\u3081\u306b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3092\u4f7f\u3044\u307e\u3059\uff0e\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306f\u6a19\u6e96\u5165\u529b\u3068\u6a19\u6e96\u51fa\u529b\u3055\u3048\u51fa\u6765\u308c\u3070\u53ef\u80fd\u306a\u306e\u3067\u3001Python\u3092\u4f7f\u3044\u307e\u3059\uff0e"}),"\n",(0,r.jsx)(n.h2,{id:"mdbook-private",children:"mdbook-private"}),"\n",(0,r.jsxs)(n.p,{children:["\u9664\u5916\u3059\u308b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3092 ",(0,r.jsx)(n.code,{children:"mdbook-private"})," \u3068\u3044\u3046\u540d\u524d\u3067\u4f5c\u6210\u3057\u307e\u3059\uff0e\u3061\u306a\u307f\u306b\u540c\u540d\u306e\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u304c\u3059\u3067\u306b\u5b58\u5728\u3057\u307e\u3059\u304c\u3001\u60f3\u5b9a\u3057\u305f\u4f7f\u3044\u65b9\u3068\u7570\u306a\u308b\u306e\u3067\u81ea\u4f5c\u3057\u307e\u3059\uff0e\n\u5b9f\u88c5\u3059\u308b\u6a5f\u80fd\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e3\u3064\u306b\u306a\u308a\u307e\u3059\uff0e"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5148\u982d\u304c\u30a2\u30f3\u30c0\u30fc\u30b9\u30b3\u30a2\uff08",(0,r.jsx)(n.code,{children:"_"}),"\uff09\u306a\u3089\u9664\u5916"]}),"\n",(0,r.jsx)(n.li,{children:"Front Matter\u3067\u975e\u516c\u958b\u3092\u5236\u5fa1\u3059\u308b"}),"\n",(0,r.jsx)(n.li,{children:"\u30b3\u30f3\u30c6\u30f3\u30c4\u5185\u306e\u4e00\u90e8\u3092\u975e\u516c\u958b\u306b\u3059\u308b"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u5229\u7528",children:"\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u5229\u7528"}),"\n",(0,r.jsxs)(n.p,{children:["mdBook\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08",(0,r.jsx)(n.code,{children:"book.toml"}),"\u304c\u3042\u308b\uff09\u306b ",(0,r.jsx)(n.code,{children:"preprocessor"})," \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u3001\u305d\u3053\u306b ",(0,r.jsx)(n.code,{children:"mdbook-private.py"})," \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0e\n\u3053\u306e\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3092\u4f7f\u3046\u306b\u306f ",(0,r.jsx)(n.code,{children:"book.toml"})," \u306b\u4ee5\u4e0b\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0eWindows\u7528\u306a\u306e\u3067 ",(0,r.jsx)(n.code,{children:"py"})," \u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[preprocessor.private]\ncommand = "py preprocessor/mdbook_private.py"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u3072\u306a\u5f62",children:"\u3072\u306a\u5f62"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'import json\nimport sys\n\nif __name__ == "__main__":\n    if len(sys.argv) > 1:  # we check if we received any argument\n        if sys.argv[1] == "supports":\n            # then we are good to return an exit status code of 0, since the other argument will just be the renderer\'s name\n            sys.exit(0)\n\n    # load both the context and the book representations from stdin\n    context, book = json.load(sys.stdin)\n\n    # we are done with the book\'s modification, we can just print it to stdout,\n    print(json.dumps(book))\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306f\u6a19\u6e96\u5165\u529b\u304b\u3089\u30c7\u30fc\u30bf\u304c\u6e21\u3055\u308c\u307e\u3059\uff0e\u305d\u308c\u3092\u52a0\u5de5\u3057\u3066\u6a19\u6e96\u51fa\u529b\u306b\u51fa\u529b\u3057\u307e\u3059\uff0e",(0,r.jsx)(n.code,{children:"context"}),"\u306b\u306f",(0,r.jsx)(n.code,{children:"book.toml"}),"\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u304c\u6e21\u3055\u308c\u307e\u3059\uff0e",(0,r.jsx)(n.code,{children:"book"}),"\u306f ",(0,r.jsx)(n.code,{children:"SUMMARY.md"})," \u304b\u3089\u30ea\u30f3\u30af\u3055\u308c\u3066\u3044\u308b\u3059\u3079\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u307e\u3068\u3081\u3089\u305f\u3082\u306e\u3067\u3059\uff0e\u3069\u3061\u3089\u3082",(0,r.jsx)(n.code,{children:"json"}),"\u5f62\u5f0f\u3067\u3059\uff0e"]}),"\n",(0,r.jsxs)(n.h3,{id:"\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5148\u982d\u304c\u30a2\u30f3\u30c0\u30fc\u30b9\u30b3\u30a2_\u306a\u3089\u9664\u5916",children:["\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5148\u982d\u304c\u30a2\u30f3\u30c0\u30fc\u30b9\u30b3\u30a2\uff08",(0,r.jsx)(n.code,{children:"_"}),"\uff09\u306a\u3089\u9664\u5916"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5404\u7ae0\u306f ",(0,r.jsx)(n.code,{children:'book["sections"]'})," \u306b\u3042\u308a\u307e\u3059\uff0e\u305d\u308c\u3092\u89e3\u6790\u3057\u3066\u51e6\u7406\u3057\u307e\u3059\uff0e\u4ee5\u4e0b\u304c\u30b3\u30fc\u30c9\u3067\u3059\uff0e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'import json\nimport sys\nfrom pathlib import Path\n\ndef check_section(section):\n    if "Chapter" in section:\n        # check prefix\n        if Path(section["Chapter"]["path"]).stem.startswith("_"):\n            return False\n\n        items = section["Chapter"]["sub_items"]\n        section["Chapter"]["sub_items"] = []\n        for item in items:\n            if check_section(item):\n                section["Chapter"]["sub_items"].append(item)\n    return True\n\nif __name__ == "__main__":\n    if len(sys.argv) > 1:  # we check if we received any argument\n        if sys.argv[1] == "supports":\n            # then we are good to return an exit status code of 0, since the other argument will just be the renderer\'s name\n            sys.exit(0)\n\n    # load both the context and the book representations from stdin\n    context, book = json.load(sys.stdin)\n    sections = book["sections"]\n    book["sections"] = []\n    for section in sections:\n        if check_section(section):\n            book["sections"].append(section)\n\n    # we are done with the book\'s modification, we can just print it to stdout,\n    print(json.dumps(book))\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"check_section"}),"\u95a2\u6570\u306f\u516c\u958b\u5bfe\u8c61\u306a\u3089",(0,r.jsx)(n.code,{children:"True"}),"\u3092\u3001\u305d\u3046\u3067\u306a\u3044\u306a\u3089",(0,r.jsx)(n.code,{children:"False"}),"\u3092\u8fd4\u3057\u307e\u3059\uff0e\u30d5\u30a1\u30a4\u30eb\u540d\u306f ",(0,r.jsx)(n.code,{children:'section["Chapter"]["path"]'})," \u3084 ",(0,r.jsx)(n.code,{children:'section["Chapter"]["source_path"]'})," \u3067\u53d6\u5f97\u3067\u304d\u308b\u306e\u3067\u3001\u305d\u306e\u5024\u3092\u4f7f\u3063\u3066\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5148\u982d\u306b\u30a2\u30f3\u30c0\u30fc\u30b9\u30b3\u30a2\u304c\u3042\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\uff0e\u307e\u305f\u3001\u7bc0\u3084\u9805\u306a\u3069\u306f\u3055\u3089\u306b",(0,r.jsx)(n.code,{children:"sub_items"}),"\u306b\u5165\u3063\u3066\u3044\u307e\u3059\uff0e\u306a\u306e\u3067\u3001\u518d\u5e30\u7684\u306b\u51e6\u7406\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff0e",(0,r.jsx)(n.code,{children:"check_section"}),"\u95a2\u6570\u306e\u7d50\u679c\u306b\u3088\u3063\u3066\u3001\u516c\u958b\u3059\u308b\u5834\u5408\u306f ",(0,r.jsx)(n.code,{children:'book["sections"]'})," \u306b\u8ffd\u52a0\u3057\u307e\u3059\uff0e"]}),"\n",(0,r.jsxs)(n.p,{children:["\u7ae0\u3084\u7bc0\u306a\u3069\u306b\u306f\u756a\u53f7\u304c\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u3066\u3001",(0,r.jsx)(n.code,{children:'book["sections"]["Chapter"]["number"]'})," \u306b\u3042\u308a\u307e\u3059\uff0e\u7ae0\u306a\u3069\u3092\u9664\u5916\u3059\u308b\u3068\u3053\u306e\u756a\u53f7\u304c\u305a\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u306e\u3067\u756a\u53f7\u3092\u518d\u5272\u308a\u5f53\u3066\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff0e\u3053\u306e\u51e6\u7406\u306f\u4eca\u56de\u306f\u7701\u7565\u3059\u308b\u306e\u3067\u5fc5\u8981\u3067\u3042\u308c\u3070\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u3066\u304f\u3060\u3055\u3044\uff0e"]}),"\n",(0,r.jsx)(n.h2,{id:"front-matter\u3067\u975e\u516c\u958b\u3092\u5236\u5fa1\u3059\u308b",children:"Front Matter\u3067\u975e\u516c\u958b\u3092\u5236\u5fa1\u3059\u308b"}),"\n",(0,r.jsxs)(n.p,{children:["\u30d5\u30a1\u30a4\u30eb\u540d\u4ee5\u5916\u306b\u3001Front Matter\u3092\u4f7f\u3063\u3066\u975e\u516c\u958b\u3092\u5236\u5fa1\u3059\u308b\u4ed5\u7d44\u307f\u3092\u5c0e\u5165\u3057\u307e\u3059\uff0e\u65b9\u6cd5\u306f\u7c21\u5358\u3067\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u306b\u3042\u308bFront Matter\u3092\u8abf\u3079\u3066 ",(0,r.jsx)(n.code,{children:"private"})," \u30d5\u30a3\u30fc\u30eb\u30c9\u306b ",(0,r.jsx)(n.code,{children:"true"})," \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070\u975e\u516c\u958b\u3068\u3057\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'import json\nimport sys\nimport re\n\ndef check_private_with_frontmatter(content):\n    pattern = re.compile(r"^---(?P<frontmatters>.*?)---\\r?\\n*", re.DOTALL)\n    result = pattern.search(content)\n    if result:\n        frontmatters = result.group("frontmatters")\n        result = re.search(r"^private:\\s*(?P<private>.*?)$", frontmatters, re.MULTILINE)\n        if result:\n            return result.group("private").strip().startswith("true")\n\n    return False\n\ndef check_section(section):\n    if "Chapter" in section:\n        # check frontmatter\n        if check_private_with_frontmatter(section["Chapter"]["content"]):\n            return False\n\n        items = section["Chapter"]["sub_items"]\n        section["Chapter"]["sub_items"] = []\n        for item in items:\n            if check_section(item):\n                section["Chapter"]["sub_items"].append(item)\n    return True\n\nif __name__ == "__main__":\n    if len(sys.argv) > 1:  # we check if we received any argument\n        if sys.argv[1] == "supports":\n            # then we are good to return an exit status code of 0, since the other argument will just be the renderer\'s name\n            sys.exit(0)\n\n    # load both the context and the book representations from stdin\n    context, book = json.load(sys.stdin)\n    sections = book["sections"]\n    book["sections"] = []\n    for section in sections:\n        if check_section(section):\n            book["sections"].append(section)\n    # we are done with the book\'s modification, we can just print it to stdout,\n    print(json.dumps(book))\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"check_private_with_frontmatter"}),"\u95a2\u6570\u3067Front Matter\u3092\u8abf\u3079\u307e\u3059\uff0e\u3053\u3053\u3067\u306f\u3001\u6b63\u898f\u8868\u73fe\u3092\u4f7f\u3063\u3066\u8abf\u3079\u3066\u3044\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.h3,{id:"\u30b3\u30f3\u30c6\u30f3\u30c4\u5185\u306e\u4e00\u90e8\u3092\u975e\u516c\u958b\u306b\u3059\u308b",children:"\u30b3\u30f3\u30c6\u30f3\u30c4\u5185\u306e\u4e00\u90e8\u3092\u975e\u516c\u958b\u306b\u3059\u308b"}),"\n",(0,r.jsxs)(n.p,{children:["\u30b3\u30f3\u30c6\u30f3\u30c4\u5185\u306e\u4e00\u90e8\u3092\u975e\u516c\u958b\u306b\u3059\u308b\u305f\u3081\u3001\u30b3\u30e1\u30f3\u30c8\u3092\u4f7f\u3044\u307e\u3059\uff0e\u30b3\u30e1\u30f3\u30c8\u3067 ",(0,r.jsx)(n.code,{children:"\x3c!-- begin private --\x3e"})," \u3068 ",(0,r.jsx)(n.code,{children:"\x3c!-- end private --\x3e"})," \u3067\u56f2\u307e\u308c\u305f\u90e8\u5206\u3092\u975e\u516c\u958b\u3068\u3057\u307e\u3059\uff0e\n\u3053\u308c\u3082\u6b63\u898f\u8868\u73fe\u3092\u4f7f\u3063\u3066\u51e6\u7406\u3057\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'import json\nimport sys\nimport re\n\ndef remove_private_block(section):\n    if "Chapter" in section:\n        section["Chapter"]["content"] = re.sub(\n            r"\x3c!--\\s*begin\\s+private\\s*--\x3e[\\r?\\n]*(?P<content>.*?)[\\r?\\n]*\x3c!--\\s*end\\s+private\\s*--\x3e[\\r?\\n]*",\n            "",\n            section["Chapter"]["content"],\n        )\n        for item in section["Chapter"]["sub_items"]:\n            remove_private_block(item)\n\nif __name__ == "__main__":\n    if len(sys.argv) > 1:  # we check if we received any argument\n        if sys.argv[1] == "supports":\n            # then we are good to return an exit status code of 0, since the other argument will just be the renderer\'s name\n            sys.exit(0)\n\n    # load both the context and the book representations from stdin\n    context, book = json.load(sys.stdin)\n    sections = book["sections"]\n    book["sections"] = []\n    for section in sections:\n        if check_section(section):\n            remove_private_block(section)\n            book["sections"].append(section)\n    # we are done with the book\'s modification, we can just print it to stdout,\n    print(json.dumps(book))\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u30aa\u30d7\u30b7\u30e7\u30f3\u6a5f\u80fd",children:"\u30aa\u30d7\u30b7\u30e7\u30f3\u6a5f\u80fd"}),"\n",(0,r.jsxs)(n.p,{children:["\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306b\u5bfe\u3057\u3066\u30aa\u30d7\u30b7\u30e7\u30f3\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\uff0e\u305f\u3068\u3048\u3070\u3001\u305d\u308c\u305e\u308c\u306e\u6a5f\u80fd\u306e\u6709\u52b9\u30fb\u7121\u52b9\u306e\u5207\u66ff\u3092\u5236\u5fa1\u3067\u304d\u308b\u3068\u4fbf\u5229\u3067\u3059\uff0e\n\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f ",(0,r.jsx)(n.code,{children:"book.toml"})," \u30d5\u30a1\u30a4\u30eb\u306e\u5404\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u8a2d\u5b9a\u3067\u304d\u307e\u3059\uff0e\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f ",(0,r.jsx)(n.code,{children:"context"})," \u306b\u542b\u307e\u308c\u3066\u3044\u307e\u3059\uff0e\n",(0,r.jsx)(n.code,{children:"mdbook-private.py"})," \u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f ",(0,r.jsx)(n.code,{children:'context["config"]["preprocessor"]["private"]'})," \u306b\u5165\u3063\u3066\u3044\u307e\u3059\uff0e\n\u3053\u3053\u3067\u306f\u3001\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u6709\u52b9\u30fb\u7121\u52b9\u3092\u5207\u308a\u66ff\u3048\u308b ",(0,r.jsx)(n.code,{children:"enabled"})," \u3068\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u5185\u306e\u4e00\u90e8\u3092\u975e\u516c\u958b\u306b\u3059\u308b\u6a5f\u80fd\u3092\u5207\u308a\u66ff\u3048\u308b ",(0,r.jsx)(n.code,{children:"hidden-block"})," \u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u5bfe\u5fdc\u3057\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.p,{children:"\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u5bfe\u5fdc\u3057\u305f\u30b3\u30fc\u30c9\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'import json\nimport re\nimport sys\nfrom pathlib import Path\n\ndef check_private_with_frontmatter(content):\n    pattern = re.compile(r"^---(?P<frontmatters>.*?)---\\r?\\n*", re.DOTALL)\n    result = pattern.search(content)\n    if result:\n        frontmatters = result.group("frontmatters")\n        result = re.search(r"^private:\\s*(?P<private>.*?)$", frontmatters, re.MULTILINE)\n        if result:\n            return result.group("private").strip().startswith("true")\n\n    return False\n\n\ndef check_section(section):\n    if "Chapter" in section:\n        # check prefix\n        if Path(section["Chapter"]["path"]).stem.startswith("_"):\n            return False\n        # check frontmatter\n        if check_private_with_frontmatter(section["Chapter"]["content"]):\n            return False\n\n        items = section["Chapter"]["sub_items"]\n        section["Chapter"]["sub_items"] = []\n        for item in items:\n            if check_section(item):\n                section["Chapter"]["sub_items"].append(item)\n    return True\n\n\ndef remove_private_block(section):\n    if "Chapter" in section:\n        section["Chapter"]["content"] = re.sub(\n            r"\x3c!--\\s*begin\\s+private\\s*--\x3e[\\r?\\n]*(?P<content>.*?)[\\r?\\n]*\x3c!--\\s*end\\s+private\\s*--\x3e[\\r?\\n]*",\n            "",\n            section["Chapter"]["content"],\n        )\n        for item in section["Chapter"]["sub_items"]:\n            remove_private_block(item)\n\n\nif __name__ == "__main__":\n    if len(sys.argv) > 1:  # we check if we received any argument\n        if sys.argv[1] == "supports":\n            # then we are good to return an exit status code of 0, since the other argument will just be the renderer\'s name\n            sys.exit(0)\n\n    # load both the context and the book representations from stdin\n    context, book = json.load(sys.stdin)\n    config = context["config"]["preprocessor"]["private"]\n    if "enabled" not in config or config["enabled"]:\n        sections = book["sections"]\n        book["sections"] = []\n        for section in sections:\n            if check_section(section):\n                if "hidden-block" in config and config["hidden-block"]:\n                    remove_private_block(section)\n                book["sections"].append(section)\n    # we are done with the book\'s modification, we can just print it to stdout,\n    print(json.dumps(book))\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u3042\u3068\u306f",(0,r.jsx)(n.code,{children:"book.toml"}),"\u3067\u3053\u308c\u3089\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[preprocessor.private]\ncommand = "py preprocessor/mdbook_private.py"\nenabled = true\nhidden-block = true\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u5b9f\u884c\u9806\u756a",children:"\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u5b9f\u884c\u9806\u756a"}),"\n",(0,r.jsxs)(n.p,{children:["\u3053\u306e\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306fFront Matter\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001mdBook\u3067\u306f\u6a19\u6e96\u3060\u3068\u666e\u901a\u306b\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\uff0e\u305f\u3068\u3048\u3070\u3001\u4ee5\u524d\u306b\u66f8\u3044\u305f\u8a18\u4e8b ",(0,r.jsx)(n.a,{href:"/blog/2024/10/12/mdbook-frontmatter",children:"mdBook\u3067Front Matter\u3092\u51e6\u7406\u3059\u308b"})," \u3067\u4f5c\u6210\u3057\u305f\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\uff08",(0,r.jsx)(n.code,{children:"mdbook-frontmatter.py"}),"\uff09\u306a\u3069\u3067\u53d6\u308a\u9664\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff0e\u305d\u308c\u3068\u7d44\u5408\u305b\u3066\u4f7f\u3046\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[preprocessor.frontmatter]\ncommand = "py preprocessor/mdbook_frontmatter.py"\n\n[preprocessor.private]\ncommand = "py preprocessor/mdbook_private.py"\nenabled = true\nhidden-block = true\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u3053\u306e\u3068\u304d\u3001\u51e6\u7406\u3055\u308c\u308b\u9806\u756a\u306f\u5b9a\u7fa9\u9806\u3067\u306f\u306a\u304f\u3001\u4f55\u304b\u3057\u3089\u3067\u30bd\u30fc\u30c8\u3055\u308c\u305f\u9806\u756a\u3067\u51e6\u7406\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\uff0efrontmatter\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3067Front Matter\u90e8\u5206\u304c\u53d6\u308a\u9664\u304b\u308c\u308b\u3068private\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u304c\u6b63\u5e38\u306b\u51e6\u7406\u3067\u304d\u307e\u305b\u3093\uff0e\u305d\u306e\u305f\u3081\u3001private\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u304cfrontmatter\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u524d\u306b\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\uff0e\u305d\u3053\u3067\u3001",(0,r.jsx)(n.code,{children:"after"})," \u3084 ",(0,r.jsx)(n.code,{children:"before"})," \u3092\u4f7f\u3044\u307e\u3059\uff0e\u3053\u3053\u3067\u306f ",(0,r.jsx)(n.code,{children:"before"})," \u3092\u4f7f\u3063\u3066\u6b21\u306e\u3088\u3046\u306b\u3057\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[preprocessor.frontmatter]\ncommand = "py preprocessor/mdbook_frontmatter.py"\n\n[preprocessor.private]\nbefore = ["frontmatter"]\ncommand = "py preprocessor/mdbook_private.py"\nhidden-block = true\nenabled = true\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u3053\u308c\u3067\u3001private\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u304cfrontmatter\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u524d\u306b\u51e6\u7406\u3055\u308c\u307e\u3059\uff0e"}),"\n",(0,r.jsx)(n.h3,{id:"\u5b9f\u884c\u6642\u306b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3059\u308b",children:"\u5b9f\u884c\u6642\u306b\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3059\u308b"}),"\n",(0,r.jsxs)(n.p,{children:["\u516c\u958b\u7528\u3068\u975e\u516c\u958b\u7528\u3092\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u5207\u308a\u66ff\u3048\u3089\u308c\u308b\u3068\u4fbf\u5229\u3067\u3059\uff0e",(0,r.jsx)(n.code,{children:"book.toml"})," \u306e\u8a2d\u5b9a\u306f\u74b0\u5883\u5909\u6570\u3092\u4f7f\u3063\u3066\u5b9f\u884c\u6642\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff0e\u901a\u5e38\u306f\u975e\u516c\u958b\u7528\u306b\u3059\u3079\u3066\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\uff0e\u8a2d\u5b9a\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[preprocessor.frontmatter]\ncommand = "py preprocessor/mdbook_frontmatter.py"\n\n[preprocessor.private]\nbefore = ["frontmatter"]\ncommand = "py preprocessor/mdbook_private.py"\nhidden-block = true\nenabled = false\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u516c\u958b\u7528\u306b\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304d\u306f\u3001private\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3092\u6709\u52b9\u306b\u3057\u3001\u51fa\u529b\u5148\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u5909\u66f4\u3057\u307e\u3059\uff0e\u5404\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3067 ",(0,r.jsx)(n.code,{children:"MDBOOK"})," \u3092\u63a5\u982d\u8f9e\u306b\u3057\u3066\u6307\u5b9a\u3057\u307e\u3059\uff0e\u30bb\u30af\u30b7\u30e7\u30f3\u306f ",(0,r.jsx)(n.code,{children:"__"})," \u3067\u533a\u5207\u308a\u3001",(0,r.jsx)(n.code,{children:"-"})," \u306f ",(0,r.jsx)(n.code,{children:"_"})," \u306b\u7f6e\u304d\u63db\u3048\u307e\u3059\uff0e\u4ee5\u4e0b\u306f\u516c\u958b\u7528\u306e\u74b0\u5883\u5909\u6570\u8a2d\u5b9a\u4f8b\u3067\u3059\uff0e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'MDBOOK_BUILD__BUILD_DIR = "book_public"\nMDBOOK_PREPROCESSOR__PRIVATE__ENABLED = "true"\n'})}),"\n",(0,r.jsxs)(n.p,{children:['\u516c\u958b\u7528\u306f "book_public" \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\uff0e\u305f\u3068\u3048\u3070\u3001',(0,r.jsx)(n.code,{children:"cargo-make"})," \u3092\u4f7f\u3063\u305f\u8a2d\u5b9a\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff0e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[tasks.build]\ndescription = "Build book"\ncommand = "mdbook"\nargs = [\n  "build",\n  "${@}"\n]\n\n[tasks.build-public]\ndescription = "Build book"\nscript_runner = "pwsh"\nscript_extension = "ps1"\nscript = \'\'\'\n$BuildDir = ".\\book_public"\n$env:MDBOOK_BUILD__BUILD_DIR = $BuildDir\n$env:MDBOOK_PREPROCESSOR__PRIVATE__ENABLED = "true"\nmdbook clean\nmdbook build\n\'\'\'\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6b21\u306e\u3088\u3046\u306b\u4f7f\u3044\u307e\u3059\uff0e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"makers build        # for private\nmakers build-public # for public\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4ee5\u4e0a\u3067\u3059\uff0e"})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);