<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://mebiusbox.github.io/blog</id>
    <title>Mebiusbox software Blog</title>
    <updated>2023-11-30T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://mebiusbox.github.io/blog"/>
    <subtitle>Mebiusbox software Blog</subtitle>
    <icon>https://mebiusbox.github.io/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[Docusaurus v3 にアップグレードしました]]></title>
        <id>https://mebiusbox.github.io/blog/2023/11/30/docusaurus-v3</id>
        <link href="https://mebiusbox.github.io/blog/2023/11/30/docusaurus-v3"/>
        <updated>2023-11-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[このサイトに使っているDocusaurusをv2からv3にアップグレードしました]]></summary>
        <content type="html"><![CDATA[<p>このサイトを生成するのに使っている <a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a> を <a href="https://docusaurus.io/blog/2022/08/01/announcing-docusaurus-2.0" target="_blank" rel="noopener noreferrer">v2</a> から <a href="https://docusaurus.io/blog/releases/3.0" target="_blank" rel="noopener noreferrer">v3</a> にアップグレードしました．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="動機">動機<a href="https://mebiusbox.github.io/blog/2023/11/30/docusaurus-v3#%E5%8B%95%E6%A9%9F" class="hash-link" aria-label="動機 への直接リンク" title="動機 への直接リンク">​</a></h2>
<p>単純に最新にしたかっただけです．古いままだとやはりメンテしづらいですから．
あまり独自でいじってしまうとアップグレードしづらくなって、結局面倒なことになりかねないので、なるべく用意されている機能で拡張していくのがいいですね．私もプラグインを自作して使っていますが、大したことはしていないですし、補助的なものです．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="アップグレード時の問題">アップグレード時の問題<a href="https://mebiusbox.github.io/blog/2023/11/30/docusaurus-v3#%E3%82%A2%E3%83%83%E3%83%97%E3%82%B0%E3%83%AC%E3%83%BC%E3%83%89%E6%99%82%E3%81%AE%E5%95%8F%E9%A1%8C" class="hash-link" aria-label="アップグレード時の問題 への直接リンク" title="アップグレード時の問題 への直接リンク">​</a></h2>
<p><a href="https://mdxjs.com/" target="_blank" rel="noopener noreferrer">MDX</a> のバージョンが上がって v1 から一気に v3 に上がったみたいです．Markdown ファイルの制限が厳しくなり、より厳密なチェックがされるようになりました．特に影響の大きかったのは<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering">数式処理の部分をCSRにしているところ</a>で、<code>{}</code>がJavaScriptとして認識されてしまい、数式内のコマンドがエラーになってしまいました．これに関してはエスケープをすることで対応しましたが、数式すべてで<code>{}</code>をエスケープするのは置換で対応できるとはいえ面倒なので、普通に<code>remark-math</code>、<code>rehype-katex</code>プラグインを使うのが一番だと思います．この処理をしたのは数式が多いとDocusaurusのビルド時間が増えることやバンドル時の容量も増えてしまうためでした．これに関しては何らかの方法でHTMLにしたものを静的コンテンツとして扱うのがいいかなと思います．</p>
<p>あとは、カード形式のリンクを作成するために <code>react-link-card</code> を使っていたのですが、これがエラーを出すようになりました．また、このプラグインはメンテもされていないため、使わないことにしました．</p>
<p>もう1つ、最新のブログ投稿をトップページに表示するところで、デプロイするとエラーが表示されるものがありました．これは開発環境では発生しません．エラーは <a href="https://docusaurus.io/blog/releases/3.0#debug-builds" target="_blank" rel="noopener noreferrer">React 18 による hydration エラー</a>で結局原因はよくわからなかったのですが、<a href="https://github.com/mebiusbox/mebiusbox.github.com/commit/b01ed25abf87a41ac40c810648be1d1a7642e713" target="_blank" rel="noopener noreferrer">問題箇所は特定できたので対応</a>しました．</p>
<p>他は特に苦労したところはありません．Node を v18 に、React も v18、TypeScript を v5 にしたことや、コンフィグファイルでESMの文法に変更したことぐらいです．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="静的コンテンツの扱い">静的コンテンツの扱い<a href="https://mebiusbox.github.io/blog/2023/11/30/docusaurus-v3#%E9%9D%99%E7%9A%84%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%81%AE%E6%89%B1%E3%81%84" class="hash-link" aria-label="静的コンテンツの扱い への直接リンク" title="静的コンテンツの扱い への直接リンク">​</a></h2>
<p>これは Docusaurus v3 でのお話ではありませんが、 デフォルトだと <code>static</code> フォルダに入っているものはビルド時にコピーされます．多言語（私は<code>ja</code>と<code>en</code>）をサポートしていると、その言語ごとに静的コンテンツがコピーされることを今更ながら知りました．ちょっと静的コンテンツに入れているものが大きかったのでビルドやデプロイに時間が余計に時間がかかってました．とりあえず、<code>static</code>から別のフォルダに移動してビルド時にコピーするようにして対応しました．</p>
<p>以上です．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="Docusaurus" term="Docusaurus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[「動かして学ぶ！Rust入門」の執筆]]></title>
        <id>https://mebiusbox.github.io/blog/2023/04/23/rust-book</id>
        <link href="https://mebiusbox.github.io/blog/2023/04/23/rust-book"/>
        <updated>2023-04-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Zennで公開している「Rust入門」が書籍化されました．また、書籍化にあたって大幅な加筆をしました．]]></summary>
        <content type="html"><![CDATA[<p>Zennで公開している「Rust入門」が「動かして学ぶ！Rust入門」として書籍化されました．ここでは、書籍の執筆について色々と書くことにしました．</p>
<!-- -->
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="はじめに">はじめに<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB" class="hash-link" aria-label="はじめに への直接リンク" title="はじめに への直接リンク">​</a></h2>
<p>大変嬉しいことにZennで公開している「Rust入門」を書籍化することになりました．「動かして学ぶ！Rust入門」という名前で 2023年4月24日発売です．</p>
<p><a href="https://zenn.dev/mebiusbox/books/22d4c1ed9b0003" target="_blank" rel="noopener noreferrer" class="card padding--md margin-bottom--sm cardContainer_yMBB"><span class="text--truncate cardTitle_SiGl" title="Rust入門 | Zenn"><i class="cardIcon_VTdI fas fa-external-link-alt"></i> <!-- -->Rust入門 | Zenn</span><span class="text--truncate cardDescription_fnmI" title="Rust入門">Rust入門</span></a></p>
<p><a href="https://www.amazon.co.jp/dp/B0BWR1T5QK" target="_blank" rel="noopener noreferrer" class="card padding--md margin-bottom--sm cardContainer_yMBB"><span class="text--truncate cardTitle_SiGl" title="動かして学ぶ！Rust入門 | Amazon"><i class="cardIcon_VTdI fas fa-external-link-alt"></i> <!-- -->動かして学ぶ！Rust入門 | Amazon</span><span class="text--truncate cardDescription_fnmI" title="動かして学ぶ！Rust入門">動かして学ぶ！Rust入門</span></a></p>
<p><a href="https://www.shoeisha.co.jp/book/detail/9784798177236" target="_blank" rel="noopener noreferrer" class="card padding--md margin-bottom--sm cardContainer_yMBB"><span class="text--truncate cardTitle_SiGl" title="動かして学ぶ！Rust入門 | SE Book"><i class="cardIcon_VTdI fas fa-external-link-alt"></i> <!-- -->動かして学ぶ！Rust入門 | SE Book</span><span class="text--truncate cardDescription_fnmI" title="動かして学ぶ！Rust入門">動かして学ぶ！Rust入門</span></a></p>
<p>ここでは、執筆についてやったことや思ったことなどをここにまとめておきます．</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>出版社からは許可をもらっています．</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="執筆依頼">執筆依頼<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E5%9F%B7%E7%AD%86%E4%BE%9D%E9%A0%BC" class="hash-link" aria-label="執筆依頼 への直接リンク" title="執筆依頼 への直接リンク">​</a></h2>
<p>まず、はじめに翔泳社の編集者さんから執筆依頼のメールが届きました．書籍執筆は私の1つの夢ではあったので、快諾の連絡をして打合せや構成案の提出などをして契約しました．その後、執筆期間に入ります．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="実際の執筆">実際の執筆<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E5%AE%9F%E9%9A%9B%E3%81%AE%E5%9F%B7%E7%AD%86" class="hash-link" aria-label="実際の執筆 への直接リンク" title="実際の執筆 への直接リンク">​</a></h2>
<p>私のスタイルとして、最初に必要な情報をとにかく集めます．今回は Notion を使いました．また、コードなどの参考になりそうなものはプロジェクトフォルダを作成してそこにまとめていました．執筆前に構成案を作成するのですが、その構成に合わせて資料をすべて集めます．資料を集めて、「これで書ける」と感じたら執筆を開始します．これは今回の執筆よりも前からやっている方法で今回も変わりませんでした．ちなみに、今回の執筆でそう思ったタイミングは、原稿締め切り1カ月を切っていたときです．実際に原稿はギリギリ間に合ったのですが、全くこのやり方はオススメしません．とはいえ、このやり方そのものは決して悪い方法ではなく、もっと時間に余裕を持たせようというお話です．構成を考えて調べながら書くことも可能とは思いますが、それではいつ書き終わるかが全く予想できません．特に、調べながら書く場合はあるトピックに予定以上に時間がかかることがあると破綻してしまいます．ですので、最初に資料集めをした方が書きやすいと感じています．先に全て調べなくとも、ある程度は事前にすべてチェックしておいたほうがいいです．</p>
<p>今回の執筆では、Markdownで原稿を書き、git で管理していました．また、mdbook を使用しています．mdbook は最初から使用することを決めていました．少なくとも今は rust に関して執筆するなら mdbook がオススメです．なにより、ブラウザ上ですぐにコードを実行して確認することができるのが便利です．複雑なコードは厳しいですが、簡単なコードなら十分です．また、vscode とも相性がいいです．SUMMARY.md から各ファイルにすぐジャンプできます．</p>
<p>今回の執筆は Zenn で公開している「<a href="https://zenn.dev/mebiusbox/books/22d4c1ed9b0003" target="_blank" rel="noopener noreferrer">Rust入門</a>」を加筆したものになっています．この「Rust入門」は、もともと「<a href="https://github.com/mebiusbox/docs/blob/master/Rust%E3%81%A7%E3%81%AF%E3%81%98%E3%82%81%E3%82%8B%E3%83%AC%E3%82%A4%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%B3%E3%82%B0%E5%85%A5%E9%96%80.pdf" target="_blank" rel="noopener noreferrer">Rustではじめるレイトレーシング入門</a>」から Rust の解説部分を抜き出したものです．また、「Rustではじめるレイトレーシング入門」も「<a href="https://github.com/mebiusbox/docs/blob/master/%E3%83%AC%E3%82%A4%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%B3%E3%82%B0%E5%85%A5%E9%96%80.pdf" target="_blank" rel="noopener noreferrer">レイトレーシング入門</a>」のC++部分をRustに書き直し、また、Rustの解説を追加したものになっています．構成段階で、編集者さんとお話したときにレイトレーシングのサンプル部分を使ってもいいか確認して入れていました．今回、A5サイズの書籍ということで手元にあった書籍を調べて行数や1行に表示する文字数を調べました．それぞれ、ばらばらで統一されていなかったのが意外で印象的でした．同じ出版社でもです．なので平均値（横38文字、縦33行）を算出して「Rust入門」の記事をTeXを使ってA5サイズで出力したところ約80ページしかなりませんでした．最初は250ページぐらいを想定とのことでしたので、かなり加筆しなければならないとわかっていました．サンプルとしてレイトレを追加したとしてもです．また、ボリューム的にも250ページはちょっと薄いかなと思ったので、300~350ページを目標としました．この時に「計画書」という資料を私の方で作って具体的にどの部分をどれくらいのページ数にするか適当に決めています．この資料は依頼されたわけではなく、勝手に私が作ったものです．実際にサンプルのページ数を除けば、このときの計画通りになったとちょっと驚いています．</p>
<p>構成案はまず編集者さんが提示してくれますので、それをもとに作ります．私の場合、20日間の期間がありました．ギリギリまで使って考えて構成し提出しました．これも多少「節」の移動や統合はあったものの、ほぼこのときの構成通りに執筆しています．</p>
<p>加筆内容としては、まずコードの量を増やしました．タイトルにもある通り「動かして学ぶ」シリーズなので、コード例を多く提示しました．「Rustの文法と機能」と「アプリケーションの開発」では、それぞれ250個、225個のリスト（コード）があります．同じ「動かして学ぶ」シリーズ（今回のはNextOneシリーズということで少し違います）で「<a href="https://www.amazon.co.jp/dp/4798144983" target="_blank" rel="noopener noreferrer">Pythonで動かして学ぶ！機械学習の教科書</a>」という書籍があって所持しているのですが、本当に手を動かして学べる良著だったので、参考にさせてもらいました．とはいっても、Rust入門の方はコード例を多くしているのであって、別に動かす必要はないので少し違います．
次に、「アプリケーションの開発」では単語推理ゲームとレイトレーシングを書きました．単語推理ゲームはWordleとして有名ですし、レイトレーシングはこれもまた有名なコーネルボックスのプログラムになっています．レイトレーシングは既に書いてあるのでそれの調整で済みました．いくつか間違いが見つかったのでいずれPDF版にも反映させようと思います．単語推理ゲームはicedクレートを使ったサンプルです．単語推理ゲームのロジック部分は参考にしたコードはあるのですが、それはCLIなのでGUI版を作成しました．icedクレートと注目していた tauri を使うか少し迷ったのですが、tauri はRust以外にも説明しなければいけないことが多いので、Rustだけで完結するicedクレートにしました．これは、1日で書き上げました（もちろん事前に調べていたから）．ただ、説明が不十分だったり、書き方が他の部分と比べて手抜きすぎて、ここは赤字が多かったです．</p>
<p>執筆期間は土日、平日の夜などはフルに執筆に使っていました．体調を少しでも崩していたらやばかったですね．</p>
<p>当初は250ページ、目標は300ページとしていましたが、最終的には440ページ近くになりました（書籍の詳細を見るともっと多いですが、それは目次や索引などが含まれています）．何とかなるものだなー．赤字などでいろいろ説明不足な部分も指摘されたのですが、これ以上ページ数を増やしたくなかったので、結構省いています．見本誌を頂いて中を見たときは、意外にスカスカだなと思いました．これはコードを追加した影響だと思います．いい感じに読みやすくなっているのかもしれません．</p>
<p>締め切りはどれも間に合わせました．スケジュール通りに対応できたと思います．実は予定よりもスケジュールは伸びているのですが、少なくとも私が原因ではないと思っています（まあ、原稿がまずかったのかもしれません）．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="監査">監査<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E7%9B%A3%E6%9F%BB" class="hash-link" aria-label="監査 への直接リンク" title="監査 への直接リンク">​</a></h2>
<p>今回は監査を付けていません．これは編集者さんに手配してもらったり、自分でお願いすることも出来るそうです．まあ、今回の件についてはお願いできる人が思いつきませんでした．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="校正検証">校正･検証<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E6%A0%A1%E6%AD%A3%E6%A4%9C%E8%A8%BC" class="hash-link" aria-label="校正･検証 への直接リンク" title="校正･検証 への直接リンク">​</a></h2>
<p>原稿を書き終えてから、校正やら検証が始まります．検証は原稿に書かれているプログラムや画面が正しいかどうかチェックしてくれます．これは編集者さんの方で手配してくれます．原稿をもとに組版したものが送られてくるので、検証報告を確認しながら、チェックをして赤字という形で訂正指示をします．このとき、校正記号を知らなかったので、最初は私なりに描きこんでいたのですが、ちょっと改行問題(後述)が大きかったので、もっと簡単に表せないかと思い、校正記号について調べました（<a href="https://solution.toppan.co.jp/creative/contents/TPO_column07.html" target="_blank" rel="noopener noreferrer">校正のルールと必ず覚えておくべき校正記号一覧 | 凸版</a>）．まさに知りたかったことだったので、特に改行や字下げなど利用しました．それ以外はむしろ面倒だったので使っていません．というのも手書きならまだしもPDFでのやり取りだったので、描画ツールを使って描くにはあまりにも面倒すぎます．専用のツールがあるなら楽なんですけどね．</p>
<p>特に校正で大変だったのが、改行問題です．これは Markdown に関係してきます．DocusaurusやZennなどMarkdown形式でドキュメントを書いた場合、改行をどのように扱うかはそれぞれのレンダリング処理に依存します．多くはMarkdownファイルで改行してすぐに文章を書いている場合、改行が間に入りません．mdbookもそうです．しかし、原稿として提出した場合、改行はそのまま改行として処理されます．ですので、mdbookでビルドして確認したものと組版されたものとでは結構違っていました．組版されたものは想定外の改行が多く、その度に字下げ処理されてしまい、この校正指示が大変でした（だから校正記号を調べました）．これが改行問題です．他の書籍でも結構無駄に改行が入っているものを見かけます．Markdownで書いているのかなと思ってしまいます．これは厄介な問題で、それなら改行しなければいいのではと思うかもしれませんが、日本語を含めた文書でgit管理する場合、行単位での比較になりがちなので、1行にまとめてしまうとわかりづらくなってしまいます．これに関しては結局のところ、Markdown側の改行を消すしかないとの結論に今はなっています．diffの問題や執筆も1行にまとめることで書きづらくなってしまいますけどね．ではどう対応したらいいかということですが、考えられる方法として執筆時は改行あり、提出時は改行なしに変換するツールを作る方法があります．フォーマッタのようなものです．</p>
<p>校正に関しては原稿と一緒にgitに記録して管理していました．特に必要はなかったのですが、基本1つの校正指示に1コミットという方法を使ってやっていたのですが、あまりにも多かったので、後半は少しまとめてコミットしていたこともあります．それでも、校了になるまでに、1331回コミットしていました．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="プロポーショナルフォントとiosevka">プロポーショナルフォントとIosevka<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E3%83%97%E3%83%AD%E3%83%9D%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%8A%E3%83%AB%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%81%A8iosevka" class="hash-link" aria-label="プロポーショナルフォントとIosevka への直接リンク" title="プロポーショナルフォントとIosevka への直接リンク">​</a></h2>
<p>今回の執筆で一番驚いたのが、コードの印字でプロポーショナルフォントが使われていることでした．最近では、コードをプロポーショナルフォントで表示されることも時々見るので、そういう傾向にあるのかなとも思っていました．ですが、個人的にはあり得ないので等幅フォントにしてもらいました．また、「<a href="https://github.com/be5invis/Iosevka" target="_blank" rel="noopener noreferrer">Iosevka</a>」というフォントを指定しました．Iosevkaは等幅フォントにもかかわらず文字幅が狭い、けど読みやすいとても良いフォントです．私も使っています．ライセンスもSIL Open Font Licenseで扱いやすいです．NextOneの「動かして学ぶ！」シリーズはプロポーショナルフォントが採用されているみたいです．最初お話したときは、シリーズで同じフォントにしているとのことでしたので、この本だけ等幅フォントにするのはどうなんだろうと思いましたが、そこは譲れませんでした．というのも、Rustではコンパイルエラーで具体的な位置を指定してくれるのですが、プロポーショナルフォントではずれてしまうので、困ります．他にもいくつか等幅フォントで印字されることを前提に書いている部分もありました．</p>
<p>また、A5サイズなので、横幅もA4と違って狭いです．Iosevkaとはいえ、やはり文字数が個人的に足りません．そこで、インデントサイズを4から2に減らす提案をしましたが、それならフォントサイズを調整するとのことでしたので、サンプルを頂いて確認し調整しました．オススメのサイズを実際に印刷して確認してみたんですが、私としては小さすぎると感じたので、少し大きいサイズにしてあります．ただ、それだとコードを文字幅に合わせる処理が多くなるのですが、もとからするつもりだったので問題ありませんでした．Iosevkaで印字された見本を見てもかなり見やすいので、これに関しては満足しています．ちょっと太字の等幅フォントよりかは、はるかに見やすいんじゃないかなと思います．</p>
<p>余談ですが、Iosevkaは細かいバリエーションがあってリガチャあり･なしなどがあります．特に指定しなかった私の不手際なのですが、最初リガチャありで後からリガチャなしに変えています．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="レイトレーシング">レイトレーシング<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E3%83%AC%E3%82%A4%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%B3%E3%82%B0" class="hash-link" aria-label="レイトレーシング への直接リンク" title="レイトレーシング への直接リンク">​</a></h2>
<p>はい、「アプリケーションの開発」にレイトレーシングのサンプルがあります．まさかのRust入門にいきなり数式が沢山でてきます．ですが、そんなことは気にしない．興味があればやってみてください．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="印税について">印税について<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E5%8D%B0%E7%A8%8E%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6" class="hash-link" aria-label="印税について への直接リンク" title="印税について への直接リンク">​</a></h2>
<p>詳しい事はお話できませんが、技術書が高い理由がわかった気がします．また、発売までの作業を考えると厳しいと思いました．ただ、原稿の執筆期間だけを考えれば悪くもないと思います．初回は原稿以外の部分でも大変と感じてしまいますが、そこを乗り切ればあとは原稿の執筆期間だけと考えると、なるほどという感じ．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="モチベーション">モチベーション<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E3%83%A2%E3%83%81%E3%83%99%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3" class="hash-link" aria-label="モチベーション への直接リンク" title="モチベーション への直接リンク">​</a></h2>
<p>今回の執筆については、最初にも書いているある通り書籍を執筆することが夢の1つだったので、モチベが下がることはありませんでした．普段から文書を書くときにあまりモチベが下がることはありません．というのも、資料を集めて一気に書き上げるスタイルなので、書き始めてたらそのまま最後まで書き終えます．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="足りない部分">足りない部分<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E8%B6%B3%E3%82%8A%E3%81%AA%E3%81%84%E9%83%A8%E5%88%86" class="hash-link" aria-label="足りない部分 への直接リンク" title="足りない部分 への直接リンク">​</a></h2>
<p>基本的に本書を読むために必要なことは順番に書いてあるつもりですが、1つだけ、<code>pin</code>について書けませんでした．これは非同期処理のところでコードとしてさらっと出てきて一切説明していません．他にもいくつか説明が足らないところが多いです．ただ、あまりに細かく説明してしまうとページ数が多くなってしまうので、分かってはいても追加はしませんでした．そういった部分はZennのRust入門に追加しようと思っています．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="本を書くために">本を書くために<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E6%9C%AC%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%9F%E3%82%81%E3%81%AB" class="hash-link" aria-label="本を書くために への直接リンク" title="本を書くために への直接リンク">​</a></h2>
<p>私なりに思うことです．もともとPDFとして技術的な解説書を書いてきました．これは本を執筆したかったからであり、その練習でもあります．なので、原稿はTeXで書き、PDFとして出力していました．そのまま印刷できるように、かつ、そのまま本としても問題ないようにです．そのような文書を20近く書いてきました．その経験を十分に活かせたと思っています．今回の執筆では Zenn の「Rust入門」が始まりではありますが、その記事は「Rustではじめるレイトレーシング入門」の一部であり、さらに「レイトレーシング入門」という文書をRustに書き直したものです．これは2018年末に書いたものなので、4年ぐらい前になります．資料を集めて、原稿を実際に書いた期間は1カ月ほどですが、それまで積み上げてきたものがあってこそだと思います．</p>
<p>また、初回の構成案や計画書などはかなり正確にできました．これは見積もりに関係してきます．これについては WBS（Work Breakdown Structure）の考え方が大きいです．これにより正確な見積もりが出来るようになりました．</p>
<p>あと、情報の整理のやり方も大事です．Notion でも Markdown でも好きなものを使えばいいと思います．書くための情報をどのように書いておくか．基本的には箇条書きになります．十分に、そして漏らさずに．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="執筆環境">執筆環境<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E5%9F%B7%E7%AD%86%E7%92%B0%E5%A2%83" class="hash-link" aria-label="執筆環境 への直接リンク" title="執筆環境 への直接リンク">​</a></h2>
<p>WindowsでVSCodeを使いました．形式は Markdown で mdbook を使っています．プロジェクトは git で管理しています．
mdbookの追加機能として<code>mdbook-admonition</code>を使っています．これは注釈を入れるものです．VSCodeの拡張機能として「テキスト校正くん」を使いました．これは表記揺れ対応に使っています．他には、Windowsツールとして <code>keyhac</code>, <code>espanso</code> を使っています．それぞれテキストを処理するためのツールです．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="執筆校正ルール">執筆（校正）ルール<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E5%9F%B7%E7%AD%86%E6%A0%A1%E6%AD%A3%E3%83%AB%E3%83%BC%E3%83%AB" class="hash-link" aria-label="執筆（校正）ルール への直接リンク" title="執筆（校正）ルール への直接リンク">​</a></h2>
<p>執筆するときに、最初に自分用の執筆ルールを作成しました．これは表記揺れ対応にもつながります．主に、英語と日本語の扱い、空白の入れ方などをまとめています．また、校正時にはさらに校正ルールを作成して対応しました．これも表記揺れ対応です．一部を抜粋すると次のようなものです．</p>
<ul>
<li>日本語の句点には <code>、</code>, <code>．</code> (全角)を使用します． <code>,</code> (半角)は列挙の意味になります： <code>i32, u32, s32</code> や <code>赤, 青, 黄</code>．また、日本語の中点は半角の <code>･</code> を使います．</li>
<li><code>()</code>は半角．()内の内側に空白は入れません</li>
<li>数字は全角ではなく半角を使用．数字の前後には空白を入れません</li>
<li>用語の英語表記について、それが英単語のみであれば前後に半角空白を入れて <code>Rust</code> とし、英語+日本語の場合には空白を入れません(<code>Rust言語</code>)．これは会社名なども同じで <code>Google</code> または<code>Google社</code>とします．ただし、全角 <code>、</code> や <code>．</code> の直後には空白を入れません：<code>たとえば、Rust では...</code></li>
<li>バージョンや 英単語+数字のような場合は前後に半角空白を入れます： <code>1.3.0</code>, <code>Rust 2018</code></li>
<li>数式の前後に空白を入れます</li>
<li>ファイル名の前後には空白を入れます</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="作図">作図<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E4%BD%9C%E5%9B%B3" class="hash-link" aria-label="作図 への直接リンク" title="作図 への直接リンク">​</a></h2>
<p>今回の作図では Google Slide を使っています．Google Slide から PDF で出力したものを渡しています．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="画像">画像<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E7%94%BB%E5%83%8F" class="hash-link" aria-label="画像 への直接リンク" title="画像 への直接リンク">​</a></h2>
<p>スクショ以外の画像については、ライセンスがCC0のものを選んで使用しています．といっても使っているのは2つだけです．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ツール">ツール<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E3%83%84%E3%83%BC%E3%83%AB" class="hash-link" aria-label="ツール への直接リンク" title="ツール への直接リンク">​</a></h2>
<p>今回キャプションが多かったので、原稿にあるキャプションを一括で抜き出すツールを作りました．抜けなどのチェックに利用しました．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="コード">コード<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E3%82%B3%E3%83%BC%E3%83%89" class="hash-link" aria-label="コード への直接リンク" title="コード への直接リンク">​</a></h2>
<p>原稿にある動かせるコードは、すべてすぐに確認できるようにプロジェクトを作成しています．mdbookでは動作確認はできますが、細かいビルドチェックなどができません．なので、別途作っています．これは原稿が出来たあとに作っています．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="厄介なこと">厄介なこと<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E5%8E%84%E4%BB%8B%E3%81%AA%E3%81%93%E3%81%A8" class="hash-link" aria-label="厄介なこと への直接リンク" title="厄介なこと への直接リンク">​</a></h2>
<p>Rustは定期的にアップデートしています．エディションは変わりませんでしたが、執筆時点で 1.64、発売時には 1.69 になっていました．その間にビルドは問題なかったのですが、いくつか表示されるエラーが変わったり、Rust Playground の環境が更新されていたり、Rustのビルドの設定が変わっていたりと細かい更新がありました．これはどうしようもないので、特に発売までの間はバージョンに気を付けなければなりません．書籍で採用しているバージョンがあるとはいえ、実際に手に取って読み進めるときは最新にするでしょうから．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="zenn">Zenn<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#zenn" class="hash-link" aria-label="Zenn への直接リンク" title="Zenn への直接リンク">​</a></h2>
<p>Zennで公開している「Rust入門」は「Rustではじめるレイトレーシング入門」の一部です．これをZennで書いた理由というのはいくつかあるのですが、その1つとして、多くの人に読んでもらえるというのがあります．これは GitHub で公開しているだけでは出来ません．Zennを利用する前はQiitaに書いていましたが、不満があってやめました．Zennの本形式で書いていますが、特に難しくありません．アウトプットは大事ですが、どこにアウトプットするかも大事です．私はDocusaurusやGitHubで文書を公開していますが、同時にZennにも公開しています．それはやはり多くの人に見てもらえるからです．とはいえ、複数のアウトプット先があると面倒です．微妙にMarkdownの書き方が違います．そこは、ZennのMarkdown形式に変換するツールを作って対応しました．これでかなり楽になっています．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="gpt">GPT<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#gpt" class="hash-link" aria-label="GPT への直接リンク" title="GPT への直接リンク">​</a></h2>
<p>これは執筆がほぼ終わった後に検証したのですが、OpenAIのAPIを使って原稿の校正チェッカを作って試しました．かなり有用だと思います．VSCodeの拡張機能「テキスト校正くん」では簡単な表記揺れなどの対応はできますが、誤字･脱字、スペルチェック、そしてなにより適切な言い回しの候補を教えてくれるので便利です．今回は利用出来ませんでしたが、執筆の機会があれば間違いなく利用すると思います．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="最後に">最後に<a href="https://mebiusbox.github.io/blog/2023/04/23/rust-book#%E6%9C%80%E5%BE%8C%E3%81%AB" class="hash-link" aria-label="最後に への直接リンク" title="最後に への直接リンク">​</a></h2>
<p>多くの経験をさせてもらいました．また、このような執筆の機会が得られたことをとても感謝しています．至らない部分も多いかと思いますが、多くの人に読んでもらえたなら大変嬉しく思います．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="Rust" term="Rust"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[NotionでWBSを管理する]]></title>
        <id>https://mebiusbox.github.io/blog/2023/01/17/notion-wbs</id>
        <link href="https://mebiusbox.github.io/blog/2023/01/17/notion-wbs"/>
        <updated>2023-01-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Notionのサブアイテムを使ってWBSを構築するやり方を解説します]]></summary>
        <content type="html"><![CDATA[<p>Notionのサブアイテム機能を使うことで単一のデータベースのみでWBS(Work Breakdown Structure)を構築できます．
ここでは、次のようなWBSの構築方法を解説します．</p>
<!-- -->
<!-- -->
<div class="videoWrapper_xpwa"><div style="width:100%;height:100%" class="videoPlayer_IRVz"></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_BuS1"><p>ここでは、英語版Notionで解説しています．また、CSSで見た目をカスタマイズしているものをスクショしています．ご了承ください．</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="データベースの作成">データベースの作成<a href="https://mebiusbox.github.io/blog/2023/01/17/notion-wbs#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90" class="hash-link" aria-label="データベースの作成 への直接リンク" title="データベースの作成 への直接リンク">​</a></h2>
<p>まず、データベースを作成します．プロパティは次のようにします：</p>
<ul>
<li>Task: タイトル(Title)</li>
<li>進捗(子): セレクト(Select)</li>
<li>進捗(親): 関数(Formula)</li>
</ul>
<p><span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">進捗(子)</span>のセレクト項目は次のようにしました． </p>
<ul>
<li><code>0%</code> .. <code>100%</code> (10%刻み)</li>
<li><code>自動</code></li>
</ul>
<p><span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">進捗(親)</span>の関数は後で解説します．</p>
<p>この時点で次のようなプロパティ構成になっています．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117230900-50038e269079a867b3b8ec884a07b901.png" width="671" height="369" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="サブアイテムの設定">サブアイテムの設定<a href="https://mebiusbox.github.io/blog/2023/01/17/notion-wbs#%E3%82%B5%E3%83%96%E3%82%A2%E3%82%A4%E3%83%86%E3%83%A0%E3%81%AE%E8%A8%AD%E5%AE%9A" class="hash-link" aria-label="サブアイテムの設定 への直接リンク" title="サブアイテムの設定 への直接リンク">​</a></h2>
<p>データベースの設定(<code>･･･</code>ボタン)からサブアイテム(<code>Sub-items</code>)の設定を選択します．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117231000-3a800a73205cb75e67e6415ef66c598b.png" width="774" height="439" class="img_ev3q"></p>
<p>設定はデフォルトのままで問題ありません．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117231026-6a9d857cd3931b510b60e543e81d25ec.png" width="788" height="476" class="img_ev3q"></p>
<p>次のようなプロパティの構成になっているはずです．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117231127-a259e6d9782c6e58f2bc3f3ae518c3a6.png" width="923" height="380" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="進捗率の計算">進捗率の計算<a href="https://mebiusbox.github.io/blog/2023/01/17/notion-wbs#%E9%80%B2%E6%8D%97%E7%8E%87%E3%81%AE%E8%A8%88%E7%AE%97" class="hash-link" aria-label="進捗率の計算 への直接リンク" title="進捗率の計算 への直接リンク">​</a></h2>
<p>子の進捗率を計算して親の進捗率として表示します．そのためにプロパティを2つ作成します．
1つは<code>_進捗N</code>で関数(Formula)タイプです．先頭の<code>_</code>は計算用を表しています．もう1つは<code>_進捗R</code>とします．こちらはロールアップ(Rollup)で、リレーション(Relation)に<code>Sub-item</code>を設定します．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117225647-270169060dd6eb6c7e012b63e38a66d5.png" width="841" height="474" class="img_ev3q"></p>
<p>次にプロパティ(Property)に<code>_進捗N</code>を設定します．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117225734-381c7e7b558ea108c93b9db7969d9cf2.png" width="828" height="594" class="img_ev3q"></p>
<p>計算(Calculate)は<code>オリジナルを表示(Show original)</code>に設定しておきます．</p>
<p>この時点で、プロパティは次のようになっています．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117231537-27450a558272a282cf7a9f4b56305354.png" width="1066" height="157" class="img_ev3q"></p>
<p>適当にタスクを追加して、タスクの親子関係を設定します．ここで重要なのは、子を持つ親タスクの<span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">進捗(子)</span>は<code>自動</code>に設定しておいてください．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117231646-03f7f04189aaae0fa11d77564340a94b.png" width="1074" height="604" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="子タスクの進捗率">子タスクの進捗率<a href="https://mebiusbox.github.io/blog/2023/01/17/notion-wbs#%E5%AD%90%E3%82%BF%E3%82%B9%E3%82%AF%E3%81%AE%E9%80%B2%E6%8D%97%E7%8E%87" class="hash-link" aria-label="子タスクの進捗率 への直接リンク" title="子タスクの進捗率 への直接リンク">​</a></h3>
<p><code>_進捗N</code>は子タスクの<span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">進捗(子)</span>のセレクト値を数値に変換します．まず、<code>_進捗N</code>を数値として扱いたいので、関数(Formula)で<code>1</code>と設定します．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117232045-93ff2b9c60bf803288556eb233e824a7.png" width="995" height="327" class="img_ev3q"></p>
<p>これで、このプロパティが数値として扱われます．数値として扱われると、関数プロパティのオプションに<code>数値の形式(Number format)</code>と<code>表示形式(Show as)</code>が追加されます．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117232215-c3908f3292c1dd427aa2da81d323c0af.png" width="351" height="343" class="img_ev3q"></p>
<p>数値の形式(Number format)を<code>数値(Number)</code>にし、表示形式(Show as)を<code>リング(Ring)</code>に設定します．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117232322-2307f9d485d6504ed2ffb39b3034e492.png" width="343" height="441" class="img_ev3q"></p>
<p>次に、<code>_進捗N</code>を数値に設定すると、そのプロパティをロールアップしている<code>_進捗R</code>の計算(Calculate)に項目が追加されますので、<code>合計(Sum)</code>を設定します．そうすると、<code>表示形式(Show as)</code>が選べるようになりますが<code>数値(Number)</code>のままにしておきます．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117232735-1e21ef497581026a3382438c88cdfd84.png" width="493" height="629" class="img_ev3q"></p>
<p>これで、<code>_進捗N</code>と<code>_進捗R</code>がともに数値となりました．次に<code>_進捗N</code>の関数を設定します．関数は次の通りです．</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">prop</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"進捗(子)"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">==</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"自動"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">floor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">prop</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"_進捗R"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">max</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">length</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">replaceAll</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">prop</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"Sub-item"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">","</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"[^,]"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">""</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">toNumber</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">slice</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">prop</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"進捗(子)"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>何をやっているかを説明すると、そのタスクが親タスク(<span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">進捗(子)</span>で<code>自動</code>を設定しているタスク)であれば、<code>_進捗R</code>（そのタスクの子タスクすべての進捗率の合計）から子タスクの数で割って進捗率を計算しています．また、子タスクであれば、<span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">進捗(子)</span>のセレクト値を数値に変換しています．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="親タスクの進捗率">親タスクの進捗率<a href="https://mebiusbox.github.io/blog/2023/01/17/notion-wbs#%E8%A6%AA%E3%82%BF%E3%82%B9%E3%82%AF%E3%81%AE%E9%80%B2%E6%8D%97%E7%8E%87" class="hash-link" aria-label="親タスクの進捗率 への直接リンク" title="親タスクの進捗率 への直接リンク">​</a></h3>
<p>あとは、<span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">進捗(親)</span>の計算で進捗率を計算します．<span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">進捗(親)</span>の関数に以下を設定します．</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">length</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">prop</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"Sub-item"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">floor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">prop</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"_進捗R"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">max</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">length</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">replaceAll</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function" style="color:#e6db74">prop</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"Sub-item"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">","</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"[^,]"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">""</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">prop</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"_進捗N"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117234022-9971f6985ffcb1ad38441e886245b294.png" width="1006" height="397" class="img_ev3q"></p>
<p>数値の形式は<code>パーセント(Percent)</code>、表示形式は<code>リング(Ring)</code>に設定します．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117234120-63b956cbfbe5a71f3aa51491ad2c453d.png" width="340" height="453" class="img_ev3q"></p>
<p>これで親タスクや子タスクを追加すると自動で計算されるようになります．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117234223-451e7ece67201e5269256e0821be4bf6.png" width="1084" height="641" class="img_ev3q"></p>
<p>最後に不要なプロパティを非表示にすることで完成です．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117234330-7641ba78950805dbb44d47f31fe8f64b.png" width="562" height="622" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ステータスプロパティを使った方法">ステータスプロパティを使った方法<a href="https://mebiusbox.github.io/blog/2023/01/17/notion-wbs#%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E6%96%B9%E6%B3%95" class="hash-link" aria-label="ステータスプロパティを使った方法 への直接リンク" title="ステータスプロパティを使った方法 への直接リンク">​</a></h2>
<p>これまでの方法では子タスクの進捗率を計算して親タスクの進捗率を算出しました．
もし、そこまで正確な値を求める必要はなく、全体のタスクの進捗が終わったかどうかだけ調べて進捗率に反映させたい場合、ステータスプロパティを使って数式を使わずとも計算できます．</p>
<p>まず、データベースを作成します．</p>
<ul>
<li>Task: タイトル(Title)</li>
<li>進捗(子): ステータス(Status)</li>
<li>進捗(親): ロールアップ(Rollup)</li>
</ul>
<p>次に、サブアイテムの設定をします．設定はデフォルトのままで問題ありません．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117235400-4e4e044067545360ba69e647d433ef2a.png" width="993" height="373" class="img_ev3q"></p>
<p>適当にタスクを追加して、タスクの親子関係を設定します．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117235544-3976c6206d6e0c9b3c25cfd7f456dc52.png" width="1101" height="656" class="img_ev3q"></p>
<p>次に、<span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">進捗(親)</span>のロールアップでリレーション(Relation)を <code>Sub-item</code> 、プロパティ(Property)を<span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">進捗(子)</span>、計算(Calculate)を<code>グループごとの割合(Percent per group) → Complete</code>に設定します．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117235803-1a6207acf13744d2de6405cdb54c77ad.png" width="563" height="469" class="img_ev3q"></p>
<p>そうすると、表示形式(Show as)を設定できるようになりますので、<code>リング(Ring)</code>を設定します．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230117235912-e5520374dbf9d2f9414b0235017f347e.png" width="341" height="433" class="img_ev3q"></p>
<p>これで完成です．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-17-notion-wbs-230118000036-25e08b1dcffd154da3f5948eda49c299.png" width="1183" height="662" class="img_ev3q"></p>
<p>ただし、この方法では子タスクがすべて終わっても、その親タスクは自動で <code>Done</code> にならないので手動で行う必要があります．それを自動化することも可能かもしれませんが、ご自身で調べてみてください．</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_BuS1"><p>今回のようにロールアップを使って親、または子のプロパティを参照する場合、それがさらにその親、または子のプロパティを参照するといった循環参照をしてしまうとパフォーマンスに大きな影響があるため、制限されているとサポートから聞きました．階層が深くなってしまうとロールアップした値が異常な値になるため、階層レベルは3～4以下にしておくのが無難です．</p></div></div>
<p>今回作成したWBSのテンプレートを公開しています．詳しくはテンプレートにある「はじめにお読みください」を参照してください．</p>
<p><a href="https://mebiusbox.notion.site/WBS-c33e10534921465d93f6604948302c81" target="_blank" rel="noopener noreferrer" class="card padding--md margin-bottom--sm cardContainer_yMBB"><span class="text--truncate cardTitle_SiGl" title="WBS | mebiusbox.notion.site"><i class="cardIcon_VTdI fas fa-external-link-alt"></i> <!-- -->WBS | mebiusbox.notion.site</span><span class="text--truncate cardDescription_fnmI" title="Notion用 WBS (Work Breakdown Structure)のテンプレートです">Notion用 WBS (Work Breakdown Structure)のテンプレートです</span></a></p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="Notion" term="Notion"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Docusaurusで数式をクライアントサイドレンダリング(CSR)する]]></title>
        <id>https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering</id>
        <link href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering"/>
        <updated>2023-01-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Docusaurusで数式処理をクライアントサイドで行う方法について解説します]]></summary>
        <content type="html"><![CDATA[<p>Docusaurusは静的サイトジェネレータなので、すべてのページがビルド時にレンダリングされます．
DocusaurusのマークダウンからHTMLにレンダリングする部分は <a href="https://remark.js.org/" target="_blank" rel="noopener noreferrer">remark</a> と <a href="https://github.com/rehypejs/rehype" target="_blank" rel="noopener noreferrer">rehype</a> が処理しています．数式を有効にするには、<a href="https://docusaurus.io/docs/markdown-features/math-equations" target="_blank" rel="noopener noreferrer">Docusaurusのドキュメント</a> によれば、<code>remark-math</code> と <code>rehype-katex</code> (または <code>rehype-mathjax</code>）を使います．
しかし、2,3個の数式ならともかく、それなりの数があるとビルドに時間がかかるようになり、生成されるhtmlやjsファイルが肥大化します．もちろん、数式も含めて事前にレンダリングするので、閲覧する場合はブラウザで数式の処理が入らず高速に表示できますが、個人的にはデメリットの方が大きいので、数式処理はクライアントサイドでしたいところです．ここでは、その方法を記録しておきます．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="必要なスクリプトやcssファイルを読み込む">必要なスクリプトやCSSファイルを読み込む<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%84css%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%80" class="hash-link" aria-label="必要なスクリプトやCSSファイルを読み込む への直接リンク" title="必要なスクリプトやCSSファイルを読み込む への直接リンク">​</a></h2>
<p>今回は <a href="https://katex.org/" target="_blank" rel="noopener noreferrer">katex</a> を使って数式処理をします．バージョンは <code>0.16.4</code> です．
必要なファイルは以下の通りです．</p>
<ul>
<li><a href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" target="_blank" rel="noopener noreferrer">//cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css</a></li>
<li><a href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" target="_blank" rel="noopener noreferrer">//cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js</a></li>
<li><a href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" target="_blank" rel="noopener noreferrer">//cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js</a></li>
</ul>
<p>Docusaurusでこれらを読み込むようにするには <code>docusaurus.config.js</code> の <code>scripts</code> および <code>stylesheets</code> で指定します．</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./docusaurus.config.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> config </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">scripts</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">src</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">integrity</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">crossorigin</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"anonymous"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">defer</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">src</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">integrity</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">crossorigin</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"anonymous"</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">defer</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">stylesheets</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">href</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">type</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'text/css'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">integrity</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token literal-property property" style="color:#f92672">crossorigin</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'anonymous'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="数式をレンダリングする">数式をレンダリングする<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#%E6%95%B0%E5%BC%8F%E3%82%92%E3%83%AC%E3%83%B3%E3%83%80%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%99%E3%82%8B" class="hash-link" aria-label="数式をレンダリングする への直接リンク" title="数式をレンダリングする への直接リンク">​</a></h2>
<p>クライアントサイドでレンダリングするには、ページがロードし終わったときに <code>renderMathInElement</code> を呼び出す必要があります．
そのために、プラグインを作ります．ここでは <code>./plugins/docusaurus-plugin-katex-client</code> というプラグインを作ります（以降、<code>katex-client</code>プラグイン)．以下のようなフォルダ・ファイル構成にします．</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">└─ plugins</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    └─ docusaurus-plugins-katex-client</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        ├─ index.js</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        └─ render.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ここから、どのような仕組みになっているか説明します．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="プラグイン">プラグイン<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3" class="hash-link" aria-label="プラグイン への直接リンク" title="プラグイン への直接リンク">​</a></h3>
<p>Docusaurusに機能を追加するにはさまざまな方法があります． <a href="https://docusaurus.io/docs/advanced/plugins" target="_blank" rel="noopener noreferrer">プラグイン</a> はその1つです．Docusaurusのプラグインは公式サイトによれば、次のように説明されています．</p>
<blockquote>
<p>Docusaurus' implementation of the plugins system provides us with a convenient way to hook into the website's lifecycle to modify what goes on during development/build, which involves (but is not limited to) extending the webpack config, modifying the data loaded, and creating new components to be used in a page.</p>
</blockquote>
<p>要するに、開発やビルドの中でフックして処理を入れることができるよ、という自分なりの解釈です．<code>katex-client</code>プラグインでは、すべてのページ(グローバル)に対してフックし、特定のページだけ処理するといったようにします．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-modules">Client Modules<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#client-modules" class="hash-link" aria-label="Client Modules への直接リンク" title="Client Modules への直接リンク">​</a></h3>
<p>追加のJavascriptをすべてのページで処理するために <a href="https://docusaurus.io/docs/advanced/client#client-modules" target="_blank" rel="noopener noreferrer">Client Modules</a> を使います． 具体的には <code>renderMathInElement</code> を呼び出すJavascriptファイル(<code>render.js</code>)をClient Moduleとして指定します．指定する場所はプラグインファイル(<code>index.js</code>)です．</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./plugins/docusaurus-plugin-katex-client/index.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> path </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">require</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"path"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">module</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method-variable function-variable method function property-access" style="color:#e6db74">exports</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter">context</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> options</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#f92672">name</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'docusaurus-plugin-katex-client'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">getClientModules</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">path</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">resolve</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"./render"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="executionenvironment">ExecutionEnvironment<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#executionenvironment" class="hash-link" aria-label="ExecutionEnvironment への直接リンク" title="ExecutionEnvironment への直接リンク">​</a></h3>
<p>DocusaurusのSSGについては<a href="https://docusaurus.io/docs/advanced/ssg" target="_blank" rel="noopener noreferrer">こちら</a>に説明があります．プラグインは開発やビルドにも影響があるため、ブラウザに表示されるときのみ処理するようにしたいです．そのために <a href="https://docusaurus.io/docs/advanced/ssg#executionenvironment" target="_blank" rel="noopener noreferrer">ExecutionEnvironment</a> を使います．<code>ExecutionEnvironment.canUseDOM</code> でブラウザに表示されるかどうかが判定できます．</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">ExecutionEnvironment</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"@docusaurus/ExecutionEnvironment"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token operator" style="color:#66d9ef">!</span><span class="token maybe-class-name">ExecutionEnvironment</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">canUseDOM</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#66d9ef">null</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">// browser only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>次に、ページがロードし終わったときに処理するためには Client Module の<a href="https://docusaurus.io/docs/advanced/client#client-module-lifecycles" target="_blank" rel="noopener noreferrer">ライフサイクル関数</a> <code>onRouteDidUpdate</code> を使います．これはルートが変わってDOMに描画し終わった後に呼ばれます．ドキュメントによれば</p>
<blockquote>
<ol>
<li>The user clicks a link, which causes the router to change its current location.</li>
<li>Docusaurus preloads the next route's assets, while keeping displaying the current page's content.</li>
<li>The next route's assets have loaded.</li>
<li>The new location's route component gets rendered to DOM.</li>
</ol>
<p><code>onRouteUpdate</code> will be called at event (2), and <code>onRouteDidUpdate</code> will be called at (4). They both receive the current location and the previous location (which can be null, if this is the first screen).</p>
</blockquote>
<p>となっています．この関数の中で <code>renderMathInElement</code> を呼び出します． 次のようになります．</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">ExecutionEnvironment</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"@docusaurus/ExecutionEnvironment"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token operator" style="color:#66d9ef">!</span><span class="token maybe-class-name">ExecutionEnvironment</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">canUseDOM</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#66d9ef">null</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">onRouteDidUpdate</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter punctuation" style="color:#f8f8f2">{</span><span class="token parameter"> </span><span class="token parameter dom variable" style="color:#f8f8f2">location</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token function" style="color:#e6db74">renderMathInElement</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#f92672">delimiters</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token literal-property property" style="color:#f92672">left</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'$$'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">right</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'$$'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">display</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token literal-property property" style="color:#f92672">left</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'$'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">right</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'$'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">display</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token literal-property property" style="color:#f92672">left</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'\\('</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">right</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'\\)'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">display</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token literal-property property" style="color:#f92672">left</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'\\['</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">right</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'\\]'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">display</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#f92672">throwOnError</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#f92672">strict</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>onRouteDidUpdate</code> の引数にある <code>location</code> でルートを取得できます．これを使って処理するページを特定します．パスは
<code>location.pathname</code> です．<code>katex-client</code>プラグインのClient Moduleである<code>render.js</code>は次のようになります．</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./plugins/docusaurus-plugin-katex-client/render.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">ExecutionEnvironment</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">"@docusaurus/ExecutionEnvironment"</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token operator" style="color:#66d9ef">!</span><span class="token maybe-class-name">ExecutionEnvironment</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">canUseDOM</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#66d9ef">null</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">onRouteDidUpdate</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter punctuation" style="color:#f8f8f2">{</span><span class="token parameter"> </span><span class="token parameter dom variable" style="color:#f8f8f2">location</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> pathIsIncluded </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token dom variable" style="color:#f8f8f2">location</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">pathname</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">startsWith</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"/docs/note"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">||</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token dom variable" style="color:#f8f8f2">location</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">pathname</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">startsWith</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">"/blog"</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">pathIsIncluded </span><span class="token operator" style="color:#66d9ef">==</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#66d9ef">null</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token function" style="color:#e6db74">renderMathInElement</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#f92672">delimiters</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token literal-property property" style="color:#f92672">left</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'$$'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">right</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'$$'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">display</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token literal-property property" style="color:#f92672">left</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'$'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">right</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'$'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">display</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token literal-property property" style="color:#f92672">left</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'\\('</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">right</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'\\)'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">display</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token literal-property property" style="color:#f92672">left</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'\\['</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">right</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">'\\]'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#f92672">display</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#f92672">throwOnError</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#f92672">strict</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="katex-clientプラグインを有効にする"><code>katex-client</code>プラグインを有効にする<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#katex-client%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E3%81%99%E3%82%8B" class="hash-link" aria-label="katex-clientプラグインを有効にする への直接リンク" title="katex-clientプラグインを有効にする への直接リンク">​</a></h3>
<p>後は作成した<code>katex-client</code>プラグインを有効にします．<code>docusaurus.config.js</code>の<code>plugins</code>で指定します．</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./docusaurus.config.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token literal-property property" style="color:#f92672">plugins</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#a6e22e">'./plugins/docusaurus-plugin-katex-client'</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="結果">結果<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#%E7%B5%90%E6%9E%9C" class="hash-link" aria-label="結果 への直接リンク" title="結果 への直接リンク">​</a></h3>
<p>ビルド時間が改善されて、生成されるファイルも小さくなりました．以下は、GitHub Actionsでビルドしたときのログです．まずは、<code>remark-math+rehype-katex</code>の場合：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">Run yarn build</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">yarn run v1.22.19</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">$ docusaurus build</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[INFO] [ja] Creating an optimized production build...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[info] [webpackbar] Compiling Client</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[info] [webpackbar] Compiling Server</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[BABEL] Note: The code generator has deoptimised the styling of /home/runner/work/mebiusbox.github.com/mebiusbox.github.com/docs/note/math-3dtransformation.md as it exceeds the max of 500KB.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[BABEL] Note: The code generator has deoptimised the styling of /home/runner/work/mebiusbox.github.com/mebiusbox.github.com/docs/note/math-3dtransformation.md as it exceeds the max of 500KB.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[success] [webpackbar] Client: Compiled successfully in 1.40m</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[success] [webpackbar] Server: Compiled successfully in 1.53m</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[SUCCESS] Generated static files in "build".</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[INFO] Use `npm run serve` command to test your build locally.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Done in 103.03s.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>そして、<code>katex-client</code>プラグインに変えた場合は次の結果となりました．</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">Run yarn build</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">yarn run v1.22.19</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">$ docusaurus build</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[INFO] [ja] Creating an optimized production build...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[info] [webpackbar] Compiling Client</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[info] [webpackbar] Compiling Server</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[success] [webpackbar] Client: Compiled successfully in 26.71s</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[success] [webpackbar] Server: Compiled successfully in 32.79s</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[SUCCESS] Generated static files in "build".</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">[INFO] Use `npm run serve` command to test your build locally.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Done in 42.66s.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>実際のページは<a href="http://mebiusbox.github.io/docs/note/math-3dtransformation" target="_blank" rel="noopener noreferrer">こちら</a>です．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="注意点">注意点<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#%E6%B3%A8%E6%84%8F%E7%82%B9" class="hash-link" aria-label="注意点 への直接リンク" title="注意点 への直接リンク">​</a></h2>
<p><code>katex-client</code>プラグインにしたことによる注意点です．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="クライアント側の負荷">クライアント側の負荷<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E5%81%B4%E3%81%AE%E8%B2%A0%E8%8D%B7" class="hash-link" aria-label="クライアント側の負荷 への直接リンク" title="クライアント側の負荷 への直接リンク">​</a></h3>
<p>もちろん、クライアント側で数式処理をするのでページを開いたときに負荷がかかってしまいます．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="マークダウンでエスケープが必要">マークダウンでエスケープが必要<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%81%A7%E3%82%A8%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%97%E3%81%8C%E5%BF%85%E8%A6%81" class="hash-link" aria-label="マークダウンでエスケープが必要 への直接リンク" title="マークダウンでエスケープが必要 への直接リンク">​</a></h3>
<p>マークダウンの数式をそのまま remark や rehype に通すので、エスケープする必要があります．これは手間ではありますが、置換で対応できるので許容範囲としています．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="remark-math--rehype-katexor-rehype-mathjax-と併用できない">remark-math + rehype-katex(or rehype-mathjax) と併用できない<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#remark-math--rehype-katexor-rehype-mathjax-%E3%81%A8%E4%BD%B5%E7%94%A8%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84" class="hash-link" aria-label="remark-math + rehype-katex(or rehype-mathjax) と併用できない への直接リンク" title="remark-math + rehype-katex(or rehype-mathjax) と併用できない への直接リンク">​</a></h3>
<p>現状は併用できないです．<code>katex-client</code>プラグインを正常に動かすには <code>remark-math</code> を有効にできません．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ページをリロードすると一部の数式処理に失敗する">ページをリロードすると一部の数式処理に失敗する<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E3%83%AA%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B%E3%81%A8%E4%B8%80%E9%83%A8%E3%81%AE%E6%95%B0%E5%BC%8F%E5%87%A6%E7%90%86%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B" class="hash-link" aria-label="ページをリロードすると一部の数式処理に失敗する への直接リンク" title="ページをリロードすると一部の数式処理に失敗する への直接リンク">​</a></h3>
<p>原因不明．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="余談">余談<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#%E4%BD%99%E8%AB%87" class="hash-link" aria-label="余談 への直接リンク" title="余談 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rehypeプラグイン">rehypeプラグイン<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#rehype%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3" class="hash-link" aria-label="rehypeプラグイン への直接リンク" title="rehypeプラグイン への直接リンク">​</a></h3>
<p><code>remark-math</code> で数式がASTに変換されるので、<code>rehype</code> のプラグインを自作して、デリミタを加えてそのまま出力することができれば、余計なエスケープ処理をする必要がないのでは、と考えています．ただ、そこまで突っ込んで作る気にはなれなかったです．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="babelの警告">Babelの警告<a href="https://mebiusbox.github.io/blog/2023/01/15/docusaurus-katex-client-side-rendering#babel%E3%81%AE%E8%AD%A6%E5%91%8A" class="hash-link" aria-label="Babelの警告 への直接リンク" title="Babelの警告 への直接リンク">​</a></h3>
<p><code>remark-math+rehype-katex</code>で構築していたときに、数式の多いページをビルドすると以下の警告がたくさん出てきます．</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">[BABEL] Note: The code generator has deoptimised the styling of XXX as it exceeds the max of 500KB.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>500KBを超えると最適化が無効になるとのことです．検索してみるとBabelの設定で、<code>compact</code>を<code>false</code>にすれば解決するとありましたが、どうも上手くいきませんでした．また、Docusaurusでプロジェクトを作成したときの <code>babel.config.js</code> は次のようになっています．</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./bable.config.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">module</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#f92672">presets</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">require</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">resolve</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">'@docusaurus/core/lib/babel/preset'</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>そして、<code>@docusaurus/core/lib/bable/preset</code>の中身を見てみると<code>compact</code>は<code>true</code>と指定されています．今回の問題のために、<code>compact</code>を<code>false</code>にするのはどうかと思いますので、結局そのままにしました．</p>
<p>以上です．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="Docusaurus" term="Docusaurus"/>
        <category label="katex" term="katex"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[NotionでShadertoyやつぶやき系のツイートをギャラリーにまとめる]]></title>
        <id>https://mebiusbox.github.io/blog/2023/01/14/notion-shadertoy-gallery</id>
        <link href="https://mebiusbox.github.io/blog/2023/01/14/notion-shadertoy-gallery"/>
        <updated>2023-01-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[なるべく手間をかけずにサムネイルを作成する方法を紹介します]]></summary>
        <content type="html"><![CDATA[<p>Notionのギャラリービューを使うと、ページをサムネイル一覧で確認できます．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-14-notion-shadertoy-gallery-230114021100-11315a915d60c4fbb9303e66a04ed1e1.png" width="816" height="551" class="img_ev3q"></p>
<p>とはいえ、サムネイルを用意しなければなりません．
ここではなるべく手間をかけずにサムネイルを作成する方法を紹介します．</p>
<p>まずは、データベースを作成します．<code>Link(URL)</code>と<code>Description(Text)</code>プロパティを作成．ギャラリービューにして、プレビューをカバー、サイズを小にします</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-14-notion-shadertoy-gallery-230114030500-5a779b3877252a00ff1f5473f3be0ca8.png" width="327" height="469" class="img_ev3q"></p>
<p>Shadertoyやツイートへのリンクをデータベースに保存します．Save to NotionやWebブックマークにしてからデータベースに移動すると Description をいい感じに埋めてくれます．</p>
<p>ここから、リンク元によって処理が変わります．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="つぶやき系">つぶやき系<a href="https://mebiusbox.github.io/blog/2023/01/14/notion-shadertoy-gallery#%E3%81%A4%E3%81%B6%E3%82%84%E3%81%8D%E7%B3%BB" class="hash-link" aria-label="つぶやき系 への直接リンク" title="つぶやき系 への直接リンク">​</a></h2>
<p>Notionのページ上にツイートを埋め込みます．埋め込んだツイートの動画(画像)部分を右クリックして、「画像アドレスをコピー」します．次に、Notionのページ上部にある<code>Add Cover</code> がカバー画像を追加して、コピーしたアドレスを <code>Link</code> にペーストして送信します．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-14-notion-shadertoy-gallery-230114032100-f51f56052209e2564282b11799caaec8.png" width="680" height="268" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="shadertoy">Shadertoy<a href="https://mebiusbox.github.io/blog/2023/01/14/notion-shadertoy-gallery#shadertoy" class="hash-link" aria-label="Shadertoy への直接リンク" title="Shadertoy への直接リンク">​</a></h2>
<p>Shadertoyの画面に行きます．左上のレンダリングしている場所を右クリックして「画像をコピー」します．Notionのページにそのまま貼り付けます．</p>
<p><img loading="lazy" src="https://mebiusbox.github.io/assets/images/2023-01-14-notion-shadertoy-gallery-230114032500-011cef84f3feb45a88a4885e847ccca8.png" width="686" height="437" class="img_ev3q"></p>
<p>ちなみに、Shadertoyの場合はWebブックマークを作成するといい感じのサムネイルができます．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="glslsandbox">GLSLSandbox<a href="https://mebiusbox.github.io/blog/2023/01/14/notion-shadertoy-gallery#glslsandbox" class="hash-link" aria-label="GLSLSandbox への直接リンク" title="GLSLSandbox への直接リンク">​</a></h2>
<p>GLSLSandboxの場合は、StylusとDevToolsを使ってサムネイルを作成します．
まず、Stylusを使ってサムネイル用の画像サイズに調整します．</p>
<div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector" style="color:#a6e22e;font-style:italic">canvas</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">display</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> block</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">position</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> absolute</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">top</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">left</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">right</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">bottom</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">width</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">300</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">height</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">200</span><span class="token unit">px</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token property" style="color:#f92672">margin</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> auto</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>そして、DevToolsでcanvasを選択した状態で、コマンドパレット(<code>Ctrl+Shift+P</code>)から<code>Run&gt; Capture node screenshot</code>を選択するとサムネイルが保存されるので、それをページに貼り付けます．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="Notion" term="Notion"/>
        <category label="Shadertoy" term="Shadertoy"/>
        <category label="つぶやきGLSL" term="つぶやきGLSL"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[リニューアル：Docusaurusへ移行]]></title>
        <id>https://mebiusbox.github.io/blog/2023/01/11/docusaurus</id>
        <link href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus"/>
        <updated>2023-01-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[サイトリニューアルしました]]></summary>
        <content type="html"><![CDATA[<p>サイトをリニューアルしました．そして、数年振りのブログ更新です．
自分のサイトを持つ意味があまりなくなってきている感じはしますが、もはや学習も含めて新しいフレームワークを使ってみるテストになりつつあります．</p>
<!-- -->
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="docusaurus">Docusaurus<a href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus#docusaurus" class="hash-link" aria-label="Docusaurus への直接リンク" title="Docusaurus への直接リンク">​</a></h2>
<p>これまで、WordPressやMkDocs、Jekyllなどを使ってきました．今回は Meta(旧Facebook)製 <a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus v2</a> を使いました．</p>
<p>なぜ、Docusaurusにしたのか．</p>
<p>それはReactを使いたかったから．あとは、バージョン指定だったりAPIなどに対応したサイトも作れるということで試してみたかった．まだまだReactやらTypeScriptに慣れていないこともあって、Docusaurusを使う前にある程度学習したおかげか、ここまで作るのに4,5日程度でした．Jekyllで使っていたMarkdownは多少の調整は入ったものの、ほぼそのまま移行できているのであまり苦労はしなかったです．環境を構築できればかなり楽かなとは思います．まあ、それはどのフレームワークでも同じことが言えます．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reactとmdx">ReactとMDX<a href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus#react%E3%81%A8mdx" class="hash-link" aria-label="ReactとMDX への直接リンク" title="ReactとMDX への直接リンク">​</a></h2>
<p>やはり目玉はこの2つ <span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">React</span> と <span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">MDX</span> です． <a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">React</a> はUIフレームワーク、 <a href="https://mdxjs.com/" target="_blank" rel="noopener noreferrer">MDX</a> はマークダウンの中に <span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">JSX</span> を使用することができる機能です． JSXはJavaScriptの拡張構文で、JavaScript内にタグ構文をそのまま使用できます．今、 <span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">React</span> や <span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">MDX</span> という表示がありますが、まさにこれがReactコンポーネントです．ちなみに、 codeタグで囲むと、 <code>React</code>, <code>MDX</code> というようになります．このブログのソースファイルはマークダウン形式であり、Reactコンポーネントを使用できます．しかも簡単に．ただ、通常のマークダウンは MDX と互換がありますが、MDXは通常のマークダウンとは互換がありません．</p>
<p>Docusaurusで構築するときにReactコンポーネントを使って構築しなければならないかと言われればそうではないです．マークダウンファイルだけでも十分構築できます．今回のサイトではトップページのみ JSX で構築していますが、それ以外のものはすべてマークダウンを使っています．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="静的サイトジェネレータとしての比較">静的サイトジェネレータとしての比較<a href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus#%E9%9D%99%E7%9A%84%E3%82%B5%E3%82%A4%E3%83%88%E3%82%B8%E3%82%A7%E3%83%8D%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%A8%E3%81%97%E3%81%A6%E3%81%AE%E6%AF%94%E8%BC%83" class="hash-link" aria-label="静的サイトジェネレータとしての比較 への直接リンク" title="静的サイトジェネレータとしての比較 への直接リンク">​</a></h2>
<p>個人的な所感に基づいて、以下のドキュメントサイトを生成するツールの使い分けみたいなのを書いておきます．</p>
<ul>
<li><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a></li>
<li><a href="https://www.mkdocs.org/" target="_blank" rel="noopener noreferrer">MkDocs</a></li>
<li><a href="https://rust-lang.github.io/mdBook/" target="_blank" rel="noopener noreferrer">mdBook</a></li>
<li><a href="http://jekyllrb-ja.github.io/" target="_blank" rel="noopener noreferrer">Jekyll</a></li>
<li><a href="https://www.notion.so/" target="_blank" rel="noopener noreferrer">Notion</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="単にブログを書きたいなら">単にブログを書きたいなら<a href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus#%E5%8D%98%E3%81%AB%E3%83%96%E3%83%AD%E3%82%B0%E3%82%92%E6%9B%B8%E3%81%8D%E3%81%9F%E3%81%84%E3%81%AA%E3%82%89" class="hash-link" aria-label="単にブログを書きたいなら への直接リンク" title="単にブログを書きたいなら への直接リンク">​</a></h3>
<p>ブログサービスを使いましょう．静的サイトを使う理由がとくにないです．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ブログをマークダウンで書きたいけどgithubで管理したい">ブログをマークダウンで書きたいけど、githubで管理したい<a href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus#%E3%83%96%E3%83%AD%E3%82%B0%E3%82%92%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%81%A7%E6%9B%B8%E3%81%8D%E3%81%9F%E3%81%84%E3%81%91%E3%81%A9github%E3%81%A7%E7%AE%A1%E7%90%86%E3%81%97%E3%81%9F%E3%81%84" class="hash-link" aria-label="ブログをマークダウンで書きたいけど、githubで管理したい への直接リンク" title="ブログをマークダウンで書きたいけど、githubで管理したい への直接リンク">​</a></h3>
<p><span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">Jekyll</span>を使いましょう．GitHubが標準でサポートしています．お手軽ですし、こだわりたいならテンプレートを使ってレイアウトを自分で構築してカスタマイズできます．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ドキュメントをマークダウンのみでweb上に公開するなら">ドキュメントをマークダウンのみでWeb上に公開するなら<a href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus#%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%92%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%81%AE%E3%81%BF%E3%81%A7web%E4%B8%8A%E3%81%AB%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B%E3%81%AA%E3%82%89" class="hash-link" aria-label="ドキュメントをマークダウンのみでWeb上に公開するなら への直接リンク" title="ドキュメントをマークダウンのみでWeb上に公開するなら への直接リンク">​</a></h3>
<p><span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">MkDocs</span>を使いましょう．お手軽です． また、<span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">mdBook</span>でも構いません． Nodeの環境があるなら MkDocs、Rust (cargo) の環境があるなら mdBook という感じでもいいです．どちらの環境もあってどうしようという場合は <span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">mdBook</span> を使いましょう．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="本のようなある程度まとまったドキュメントを公開するなら">本のようなある程度まとまったドキュメントを公開するなら<a href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus#%E6%9C%AC%E3%81%AE%E3%82%88%E3%81%86%E3%81%AA%E3%81%82%E3%82%8B%E7%A8%8B%E5%BA%A6%E3%81%BE%E3%81%A8%E3%81%BE%E3%81%A3%E3%81%9F%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B%E3%81%AA%E3%82%89" class="hash-link" aria-label="本のようなある程度まとまったドキュメントを公開するなら への直接リンク" title="本のようなある程度まとまったドキュメントを公開するなら への直接リンク">​</a></h3>
<p>もし、それがローカルではなくワールドに公開したいのであれば、 <span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">Zennのブック</span>を使いましょう．
Zennのブックなら、無料で公開していてもサポートでお金が入ってくることがあります．また、有料にすることもできます．SEOも強いので、検索で見つけやすいです．<span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">Qiita</span>ではできないですし、なによりQiitaは規約で公開した内容がQiita側にも帰属することになります．</p>
<p>ローカルの場合や、Zenn以外の方法だと <span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">mdBook</span>を使いましょう．mdBookは機能が他よりも劣っているように見えるかもしれませんが、本として執筆する最低限の環境は整っています．むしろ、余計な機能（Webでのインタラクティブなものなど）があると、実際に印刷するときに困ることになります．mdBookの印刷はブラウザの機能を使うことになりますが、1つのPDFとして出力できます．PDFでも出力したいということであれば mdBook がいいでしょう．また、 mdBook は Rust のエコシステムの一部なので、メンテナンスがしっかりしていることもあります．</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="notion">Notion<a href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus#notion" class="hash-link" aria-label="Notion への直接リンク" title="Notion への直接リンク">​</a></h3>
<p><span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">Notion</span>はマークダウンの文法をサポートしていて、かつさまざまなブロックを使うことができるツールです．お手軽に公開することもできて便利です．私もずっと使っています．ブロックはReactコンポーネントと考えることもできます．ブロックを開発することはできませんが、多くのブロックがあったり、埋め込みブロックでウィジットという形で追加することもできます．1人だったり多人数であってもドキュメントを構築するツールとして Notion はありかなと思っています．ただ、ブログとか記事をNotionで公開するのは限定的なので、どこからかリンクするかサイトとしてデプロイするといったことをやったほうがいいです．また、ReactコンポーネントとしてNotionを使うこともできますので、Notionで原稿を書いてReactで表示するといったことも可能だと思います．</p>
<hr>
<ul>
<li><a href="https://github.com/NotionX/react-notion-x" target="_blank" rel="noopener noreferrer">NotionX/react-notion-x</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="えっじゃあ-docusaurusは">えっ、じゃあ Docusaurusは？<a href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus#%E3%81%88%E3%81%A3%E3%81%98%E3%82%83%E3%81%82-docusaurus%E3%81%AF" class="hash-link" aria-label="えっ、じゃあ Docusaurusは？ への直接リンク" title="えっ、じゃあ Docusaurusは？ への直接リンク">​</a></h3>
<p>正直なところ、あまりオススメはしないです．用途もあまり思いつきません．恐らく Docusaurusで作るなら Next で作った方がいいよね、ということになるとは思います．もしくはそれ以外で Gatsby とか．Reactの<a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">公式サイト</a>は Gatsby ですし、新しいReactの<a href="https://beta.reactjs.org/" target="_blank" rel="noopener noreferrer">ドキュメントサイト</a>も Next みたいです．Nextなどに精通しているなら、そちらを使った方がいいです．では、あまり詳しくない場合、Docusaurusはどうかという話になると思いますが、日本語の解説がかなり不足しているので、余計につらいかなと思います．公式ドキュメントはもちろんありますが、あまりわかりやすいものではないです．また、対応状況ももはや保守という感じも否めません．標準で採用しているCSSフレームワークの <a href="https://infima.dev/" target="_blank" rel="noopener noreferrer">Infima</a> もまだ開発段階みたいですし．時間があるなら、Nextを覚えた方がいいのではと思ってしまいます．ただ、DocusaurusもReactに精通しているならアリかなとは思います．プラグインとか数は少ないように見えますが、それで十分とも言えなくもないです．あとはReactで構築してどうぞという感じ．もう少しいろいろいじったら、まとめて記事にするかもしれません．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="さいごに">さいごに<a href="https://mebiusbox.github.io/blog/2023/01/11/docusaurus#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB" class="hash-link" aria-label="さいごに への直接リンク" title="さいごに への直接リンク">​</a></h2>
<p><span style="background-color:var(--ifm-color-primary-dark);border-radius:2px;color:var(--ifm-color-emphasis-0);padding:0.2rem 0.4rem;margin:0 0.4rem;font-family:var(--ifm-font-family-monospace)">Docusaurus</span>はドキュメントをReactで構築するフレームワークだと思います．どこにどのファイルを置くのか、どういうルーティング処理がされるのか、プラグインはどう実装するのか、そういったことが決まっているものです．あとはそれをベースにカスタマイズしていってね、というものですね．とくに最初はナビゲーション当たりが手こずる感じです．わかると大分サクっと作れるようになるのですが、ただ、今でもまだ完全には把握できていないです．まだ、導入したばかりなので探っていきたいところですね．それでは．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
        <category label="docusaurus" term="docusaurus"/>
        <category label="MkDocs" term="MkDocs"/>
        <category label="mdBook" term="mdBook"/>
        <category label="Notion" term="Notion"/>
        <category label="Jekyll" term="Jekyll"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[自前ライブラリの整備]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/27/diary</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/27/diary"/>
        <updated>2018-02-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[うーん，毎日ブログ書けるかなと思っていたんだけど難しいね．あれこれやっていると，何かが疎かになる．]]></summary>
        <content type="html"><![CDATA[<p>うーん，毎日ブログ書けるかなと思っていたんだけど難しいね．あれこれやっていると，何かが疎かになる．</p>
<p>Mebiusbox や FileHammer などは MFC で作成しているのですが，MFC 用または汎用ライブラリを１つ，.Net アプリ用にも自前ライブラリを１つ，他にもコンピュータグラフィック用のライブラリがあって，今はそれぞれメンテ中です．.Net アプリ用のライブラリは一部 GitHub で公開しています．</p>
<p>正直，FileHammer や DiskCatalogManager もソースコード公開しようかなと思ったことはあるのですが，依存ライブラリがいくつかあって結構面倒だったというのがあります．とはいえ，今だと画像関係は OpenCV にまとめられそうですね．でも OpenCV の DLL はサイズが大きくてフリーソフトウェアで数十MBって結構大きいサイズになってしまいました．他にも便利なライブラリがあるので，そちらに移行するといいのですが，やっぱり面倒なのでやっていないです．とはいえ，FileHammer である程度整理しましたけどね．64bit になって Susie Plugin も対応しなくていいかな，なんて思ったりしていますが，対応は簡単なのでやってあります．</p>
<p>自前ライブラリもずっと手付かずだったので，色々と整備していて機能を追加したり，リファクタリングしたり．Visual Studio 2012 が出たときも一度整理したんですが，Visual Studio もどんどんバージョンアップしていって，エラーが出るようになったりと結構厄介です．自分のライブラリはともかく他のライブラリの管理が大変．バージョンアップしていたりとか．まあ，色々やっています．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[PackAssistant 1.6.0 リリース]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/23/packassistant-x64</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/23/packassistant-x64"/>
        <updated>2018-02-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[PackAssistant 1.6.0 をリリースしました．こちらは Windows 10 (64bit) に対応したものです．]]></summary>
        <content type="html"><![CDATA[<p>PackAssistant 1.6.0 をリリースしました．こちらは Windows 10 (64bit) に対応したものです．</p>
<p>前回の記事でトンチンカンなことを言ってしまいましたが，既に PackAssistant 上で振り分けたあとに，フォルダをライティングソフトにD&amp;Dが出来ます．そちらを使うようにしてください．</p>
<p>PackClassify は削除しました．こちらの機能を使いたいという方は，1.5.2 (x86版) をご利用ください．Windows 10 でも使えます．</p>
<p>あと，パックサイズの標準に <code>Blu-ray XL (100GB)</code> を追加しました．</p>
<hr>
<p>ダウンロードは<a href="http://mebiusbox.github.io/software_pack_assistant.html" target="_blank" rel="noopener noreferrer">こちらから</a></p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[PackAssistant について]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/22/packassistant</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/22/packassistant"/>
        <updated>2018-02-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[FileHammer も 64bit 化したので，ついでに PackAssistant も 64bit 化しようかなと．]]></summary>
        <content type="html"><![CDATA[<p>FileHammer も 64bit 化したので，ついでに PackAssistant も 64bit 化しようかなと．
今でも窓の杜で公開されているので，使っている人はまだいてくれているのかなと思っています．</p>
<p>かなり前から何か更新するなら PackClassify を削除して，直接 iso ファイルを作れるようにしたいと思っていました．
<strong>mkisofs</strong> を使うと簡単に作れるらしいのですが，一次フォルダに全部まとめないといけないので，あまりよろしくないわけです．</p>
<p>そこで，別の方法を考えていたのですが，<strong>BurnAware</strong> というソフトでデータディスクを作成するときに，<code>貼り付け</code>  で複数の任意のフォルダやファイルを登録出来るのでは，と思いました．とりあえず，何かしらの方法で登録できれば <strong>PackClassify</strong> なんていらないわけです．</p>
<p>ということで，ちょっと試してみます．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[サポートについて（ユーザーフォーラムの設置）]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/18/user-forum</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/18/user-forum"/>
        <updated>2018-02-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[サポート体制も何度か変わっていて，今ではメールのみでしたが，ユーザーフォーラムを設置しました．]]></summary>
        <content type="html"><![CDATA[<p>サポート体制も何度か変わっていて，今ではメールのみでしたが，ユーザーフォーラムを設置しました．</p>
<ul>
<li><a href="http://mebiusbox.sakura.ne.jp/forum/" target="_blank" rel="noopener noreferrer">ユーザーフォーラム</a></li>
</ul>
<p>何かあれば上記に書き込んでみてください．また，メールにより問い合わせも受け付けています．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[開発終了・公開停止ソフト]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/17/discontinued-projects</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/17/discontinued-projects"/>
        <updated>2018-02-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[以下のソフトウェアは開発終了・公開停止とさせていただきます．]]></summary>
        <content type="html"><![CDATA[<p>以下のソフトウェアは開発終了・公開停止とさせていただきます．</p>
<ul>
<li>Mebiusbox2</li>
<li>FolderHammer</li>
<li>CodeMage</li>
<li>ExtendQuickBar</li>
<li>Bugboard</li>
<li>Mirage</li>
<li>PortalFolder</li>
<li>SmartQuickBar</li>
<li>MebiusPress</li>
<li>SmartTweetBar</li>
<li>MebiusboxReader</li>
<li>JsonBridge</li>
<li>FileMater</li>
</ul>
<p>使用してくれていた方々，ありがとうございました．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[FileHammer  について]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/16/filehammer</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/16/filehammer"/>
        <updated>2018-02-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[これまで32bit 版から以下の対応をしました．]]></summary>
        <content type="html"><![CDATA[<p>これまで32bit 版から以下の対応をしました．</p>
<ul>
<li>64bit 版</li>
<li>susie プラグインは 64bit 版（sph）ファイルに対応しました．</li>
<li>動画ルールを追加しました</li>
<li>重複ルールに xxHash を追加しました</li>
<li>ID3 ルールを使うために dll を用意してもらう必要がなくなりました</li>
<li>サポートしている画像形式：jpg, jpeg, jpe, jp2, pbm, ppm, pgm, png, tga, bmp, psd, gif, hdr, pic, pnm, tiff, tif, exr</li>
<li>サポートしている動画形式：mp4, avi, wmv, mov</li>
<li>動作させるために「Visual Studio 2015 の Visual C++ 再頒布可能パッケージ」のインストールが必要です． <a href="https://www.microsoft.com/ja-jp/download/details.aspx?id=48145" target="_blank" rel="noopener noreferrer">
https://www.microsoft.com/ja-jp/download/details.aspx?id=48145</a></li>
<li>動作環境は　Windows10 64bit のみです．（サポート対象外ですが Windows7 でも動作確認済み）</li>
</ul>
<p>※サポートしている画像形式や動画形式は仕様しているライブラリのドキュメントから抜粋しており，全ての形式で動作確認しているわけではありません．動画形式についてはコーデックによってサポートしていないものも存在します．</p>
<p>一通りやりたいことはやったので，あとは保守と何かあれば機能を追加するかもしれません．</p>
<hr>
<p><a href="http://mebiusbox.github.io/software_file_hammer.html" target="_blank" rel="noopener noreferrer">FileHammer</a></p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[FileHammer  1.20.2 (64bit版) リリース]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/15/release-filehammer-x64</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/15/release-filehammer-x64"/>
        <updated>2018-02-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[1.20.2]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1202">1.20.2<a href="https://mebiusbox.github.io/blog/2018/02/15/release-filehammer-x64#1202" class="hash-link" aria-label="1.20.2 への直接リンク" title="1.20.2 への直接リンク">​</a></h2>
<ul>
<li>動画ルールを追加</li>
<li>Susie Plugin (64bit, .sph) に対応</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="64bit版について">64bit版について<a href="https://mebiusbox.github.io/blog/2018/02/15/release-filehammer-x64#64bit%E7%89%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6" class="hash-link" aria-label="64bit版について への直接リンク" title="64bit版について への直接リンク">​</a></h2>
<p>一部機能が削除されていたりします．これは開発版です．動作が以前より不安定になっている可能性があります．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="32bit版と違うところ">32bit版と違うところ<a href="https://mebiusbox.github.io/blog/2018/02/15/release-filehammer-x64#32bit%E7%89%88%E3%81%A8%E9%81%95%E3%81%86%E3%81%A8%E3%81%93%E3%82%8D" class="hash-link" aria-label="32bit版と違うところ への直接リンク" title="32bit版と違うところ への直接リンク">​</a></h2>
<ul>
<li>susie プラグインは 64bit 版（sph）ファイルに対応しました．</li>
<li>ID3 ルールを使うために dll を用意してもらう必要がなくなりました</li>
<li>サポートしている画像フォーマットが変わっています．</li>
<li>動作させるために「Visual Studio 2015 の Visual C++ 再頒布可能パッケージ」のインストールが必要です． <a href="https://www.microsoft.com/ja-jp/download/details.aspx?id=48145" target="_blank" rel="noopener noreferrer">
https://www.microsoft.com/ja-jp/download/details.aspx?id=48145</a></li>
<li>動作環境は　Windows10 64bit のみです．（サポート対象外ですが Windows7 でも動作確認済み）</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ダウンロード">ダウンロード<a href="https://mebiusbox.github.io/blog/2018/02/15/release-filehammer-x64#%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89" class="hash-link" aria-label="ダウンロード への直接リンク" title="ダウンロード への直接リンク">​</a></h2>
<ul>
<li><a href="http://mebiusbox.sakura.ne.jp/bin/dl.php?dl=FileHammerSetupX64" target="_blank" rel="noopener noreferrer">インストーラ</a></li>
<li><a href="http://mebiusbox.sakura.ne.jp/bin/dl.php?dl=FileHammerX64" target="_blank" rel="noopener noreferrer">zip</a></li>
</ul>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[FileHammer  1.20.1 (64bit版) リリース]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/13/release-filehammer-x64</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/13/release-filehammer-x64"/>
        <updated>2018-02-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[1.20.1]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1201">1.20.1<a href="https://mebiusbox.github.io/blog/2018/02/13/release-filehammer-x64#1201" class="hash-link" aria-label="1.20.1 への直接リンク" title="1.20.1 への直接リンク">​</a></h2>
<ul>
<li>重複ルールとファイル一致ルールに xxHash を追加</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="64bit版について">64bit版について<a href="https://mebiusbox.github.io/blog/2018/02/13/release-filehammer-x64#64bit%E7%89%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6" class="hash-link" aria-label="64bit版について への直接リンク" title="64bit版について への直接リンク">​</a></h2>
<p>一部機能が削除されていたりします．これは開発版です．動作が以前より不安定になっている可能性があります．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="32bit版と違うところ">32bit版と違うところ<a href="https://mebiusbox.github.io/blog/2018/02/13/release-filehammer-x64#32bit%E7%89%88%E3%81%A8%E9%81%95%E3%81%86%E3%81%A8%E3%81%93%E3%82%8D" class="hash-link" aria-label="32bit版と違うところ への直接リンク" title="32bit版と違うところ への直接リンク">​</a></h2>
<ul>
<li>susie プラグインが動作しなくなっています</li>
<li>ID3 ルールを使うために dll を用意してもらう必要がなくなりました</li>
<li>サポートしている画像フォーマットが変わっています．</li>
<li>動作させるために「Visual Studio 2015 の Visual C++ 再頒布可能パッケージ」のインストールが必要です． <a href="https://www.microsoft.com/ja-jp/download/details.aspx?id=48145" target="_blank" rel="noopener noreferrer">
https://www.microsoft.com/ja-jp/download/details.aspx?id=48145</a></li>
<li>動作環境は　Windows10 64bit のみです．（サポート対象外ですが Windows7 でも動作確認済み）</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ダウンロード">ダウンロード<a href="https://mebiusbox.github.io/blog/2018/02/13/release-filehammer-x64#%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89" class="hash-link" aria-label="ダウンロード への直接リンク" title="ダウンロード への直接リンク">​</a></h2>
<ul>
<li><a href="http://mebiusbox.sakura.ne.jp/bin/dl.php?dl=FileHammerSetupX64" target="_blank" rel="noopener noreferrer">インストーラ</a></li>
<li><a href="http://mebiusbox.sakura.ne.jp/bin/dl.php?dl=FileHammerX64" target="_blank" rel="noopener noreferrer">zip</a></li>
</ul>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[FileHammer 64bit 版の Windows7 での動作]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/12/filehammer-for-windows7</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/12/filehammer-for-windows7"/>
        <updated>2018-02-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[基本的に今後リリースするソフトウェアの動作環境は Windows10 以降となります．]]></summary>
        <content type="html"><![CDATA[<p>基本的に今後リリースするソフトウェアの動作環境は Windows10 以降となります．
とはいえ，まだ Windows7 を使っているユーザーも多いようですし．こちらも確認できる環境があれば何とかなったりします．</p>
<p>そこで，Virtual VM で Windows7 (64bit) を動作させて，先日リリースした FileHammer の 64bit 版を確認してみたところ，問題なく動作していました．</p>
<p>という報告です．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[FileHammer：画像サイズと動画コーデック]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/11/diary</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/11/diary"/>
        <updated>2018-02-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[開発日誌をつけて，開発を進める方法はありな気がします．日誌駆動開発．]]></summary>
        <content type="html"><![CDATA[<p>開発日誌をつけて，開発を進める方法はありな気がします．日誌駆動開発．</p>
<p>動画コーデックとか，個人的にどうでもよくなったし，主流は H.264 や  H.265 かなと．これから AV1 というのも出て来るみたいですけど．
動画はサイズと長さがルールとして指定できればいいかなと思っています．とりあえず，sinku.dll が 32bit なので，64bit 版ではサポートしません．</p>
<p>画像サイズやサムネイル表示には，cximage と susie プラグインを使っていたのですが，cximage をやめて，opencv と stb_image を採用しました．
susie プラグインの 64bit 版にも対応しないとプラグインが使えないですね．とりあえず，opencv と stb_image で主流な形式は対応できると思います．</p>
<p>開発版として，今日か明日にでも 64bit 版が公開できるといいなーと考えています．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[FileHammer  1.20.0 (64bit版) リリース]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/11/release-filehammer-x64</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/11/release-filehammer-x64"/>
        <updated>2018-02-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[一部機能が削除されていたりします．これは開発版です．動作が以前より不安定になっている可能性があります．]]></summary>
        <content type="html"><![CDATA[<p>一部機能が削除されていたりします．これは開発版です．動作が以前より不安定になっている可能性があります．</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="32bit版と違うところ">32bit版と違うところ<a href="https://mebiusbox.github.io/blog/2018/02/11/release-filehammer-x64#32bit%E7%89%88%E3%81%A8%E9%81%95%E3%81%86%E3%81%A8%E3%81%93%E3%82%8D" class="hash-link" aria-label="32bit版と違うところ への直接リンク" title="32bit版と違うところ への直接リンク">​</a></h2>
<ul>
<li>susie プラグインが動作しなくなっています</li>
<li>ID3 ルールを使うために dll を用意してもらう必要がなくなりました</li>
<li>サポートしている画像フォーマットが変わっています．</li>
<li>動作させるために「Visual Studio 2015 の Visual C++ 再頒布可能パッケージ」のインストールが必要です． <a href="https://www.microsoft.com/ja-jp/download/details.aspx?id=48145" target="_blank" rel="noopener noreferrer">
https://www.microsoft.com/ja-jp/download/details.aspx?id=48145</a></li>
<li>動作環境は　Windows10 64bit のみです</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ダウンロード">ダウンロード<a href="https://mebiusbox.github.io/blog/2018/02/11/release-filehammer-x64#%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89" class="hash-link" aria-label="ダウンロード への直接リンク" title="ダウンロード への直接リンク">​</a></h2>
<ul>
<li><a href="http://mebiusbox.sakura.ne.jp/bin/dl.php?dl=FileHammerSetupX64" target="_blank" rel="noopener noreferrer">インストーラ</a></li>
<li><a href="http://mebiusbox.sakura.ne.jp/bin/dl.php?dl=FileHammerX64" target="_blank" rel="noopener noreferrer">zip</a></li>
</ul>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[FileHammer 64bit 版について]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/10/diary</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/10/diary"/>
        <updated>2018-02-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[開発日誌的な感じで書いていけば，ネタのために開発を進めるんじゃないかなと安直的な考えです．]]></summary>
        <content type="html"><![CDATA[<p>開発日誌的な感じで書いていけば，ネタのために開発を進めるんじゃないかなと安直的な考えです．</p>
<p>表題の通り FileHammer 64bit 版を開発しています．使っているライブラリも古かったので，どれも最新に．
画像処理の一部で CxImage というのを使っているのですが，画像関連は OpenCV にまとめようかなと．</p>
<p>あと，動画コーデックのために Sinku.dll を使っているのですが，64bit 版が無いようですし，サポート打ち切ろうかなと．
その代わりに OpenCV でも動画扱えるようなので，そちらを使うようにしてみます．</p>
<p>あとはハッシュに xxHash を追加しようと思っています．</p>
<p>まずは機能追加は後にして 64bit 版で今まで通り動くところまで進めたいですね．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DiskCatalogManager について]]></title>
        <id>https://mebiusbox.github.io/blog/2018/02/08/diary</id>
        <link href="https://mebiusbox.github.io/blog/2018/02/08/diary"/>
        <updated>2018-02-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[気づいたら前回の投稿から１年経過していました．]]></summary>
        <content type="html"><![CDATA[<p>気づいたら前回の投稿から１年経過していました．
何というか，去年はなかなか思い通りに行かなかった気がしていますが，英語・数学を再勉強して，Qiita
に技術的な記事を投稿したりと，新しいことをやったりもしました．</p>
<p>話が変わって，フリーソフトウェア開発ですが，何度か再開すると言っておきながら相変わらずアクションを起こせていないのはダメですね．
あんまり，そういうことは言わない方が良さそうです．
とは言うものの，個人的には何とかしたいところではあります．とりあえず，Visual Studio 2015 に変えて 64bit 化，使用しているライブラリのバージョンアップなど，少し作業を進めています．一応「FileHammer」の 64bit 版が動作するところまでいきました．いずれ公開できればいいかなと思います．</p>
<p>DL数を見てみると，結構多いなと思ってびっくりしています．特に Mebiusbox2 が想像以上にDLされており，そしてほぼ全員がこれ使えないねと思ったことでしょう．まあ，実験的な機能を入れて色々やってみたものの不安定ですからね．</p>
<p>全体的に開発が止まっているのは他でもない私自身が使わなくなったことが大きいです．ROM に焼くこともしなくなりましたし．FileHammer もずっと使っていません．まあ，使う気がなくなったというよりかは，別の作業で一杯一杯という感じです．ちょっとしたソフトウェアは作っているので，開発自体は全くしていないという訳ではないです．</p>
<p>ちょっと前置きが長くなりましたが，本題の DiskCatalogManager について，まあ，問い合わせもいくつか頂いているので，使っている方もいらっしゃるようで大変嬉しいです．いまだに，代わりのソフトはないのかなと思ったりもします．いや，もうあるのかな．
「カタログデータが読み込めなくなった」とか，「カタログ作成中にエラー」といった報告をもらっています．いやはや，申し訳ないです．
ちょろっと検索してみたところ，気づいている人もいるようで，カタログデータを１ファイルにしていることの限界が来たということですね．大量のサムネイル作成による肥大化によるもののようです．64bit にすれば，扱えるファイルサイズも増えるので一時しのぎにはなりそうですが，根本的な解決にはなりません．
とりあえず，ディスク単位でカタログファイルを作れば問題ないんじゃないかなって考えてはいます．不要なカタログデータもファイル単位で削除すれば良いわけです．あとは，カタログファイルの形式が独自なんですが，SQLite にしたいかなと思っていたり．といった感じで色々思うこともあるので，そのうち 3.0.0 開発版みたいな感じで出すかもしれません．テストには協力してもらう感じで．</p>
<p>ではでは．</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="diary" term="diary"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[EffectTextureMaker というのを作りました]]></title>
        <id>https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker</id>
        <link href="https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker"/>
        <updated>2017-01-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[EffectTextureMaker はエフェクト用のテクスチャをブラウザ上で作成するツールです。]]></summary>
        <content type="html"><![CDATA[<p>EffectTextureMaker はエフェクト用のテクスチャをブラウザ上で作成するツールです。</p>
<p><a href="http://mebiusbox.github.io/contents/EffectTextureMaker/" target="_blank" rel="noopener noreferrer">EffectTextureMaker</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="きっかけ">きっかけ<a href="https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker#%E3%81%8D%E3%81%A3%E3%81%8B%E3%81%91" class="hash-link" aria-label="きっかけ への直接リンク" title="きっかけ への直接リンク">​</a></h2>
<p>少し前からシェーダを再勉強していて、レイマーチングを試してみたところ、真っ先に思いついたのが「これでエフェクトの素材作成に使えるのでは？」でした。
エフェクトには多少思い入れがあって、昔に「<a href="http://mebiusbox.github.io/contents/mirage/" target="_blank" rel="noopener noreferrer">Mirage</a>」なんてエフェクトツールを作ったこともありました。</p>
<p>エフェクトのテクスチャは Photoshop などのソフトで作ったり、インターネット上で公開されているものを使ったりすると思いますし、
エフェクト作成ツールの中にテクスチャを生成するなんてものもあったりします。
また、今では Unreal Engine や Unity などのアセットストアでエフェクトそのものを購入するといった方法も定着しているのではないでしょうか。</p>
<p>とはいえ、多くの現場ではテクスチャは自前で作成することが多いと思います。
そんなデザイナや、デザイナ以外の人が簡単に作成できるものを作ってみようと。</p>
<p>なにより、自分が欲しかったんです...</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="レイマーチング">レイマーチング<a href="https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker#%E3%83%AC%E3%82%A4%E3%83%9E%E3%83%BC%E3%83%81%E3%83%B3%E3%82%B0" class="hash-link" aria-label="レイマーチング への直接リンク" title="レイマーチング への直接リンク">​</a></h2>
<p>WebGL というブラウザで 3DCG を表示する技術が発達しており、その技術を使ったサイトも出てきました。
レイマーチングはレイトレーシングの一種で、複雑な図形を距離関数を使って少ないプログラムコードで記述することが出来ます。
この WebGL と レイマーチングの技術の進歩でブラウザ上での美麗な CG のレンダリングが出来るようになり、多くの作品が作成されています。
例えば以下のサイトで作品を観ることができます。</p>
<ul>
<li><a href="http://glslsandbox.com/" target="_blank" rel="noopener noreferrer">GLSL Sandbox</a></li>
<li><a href="https://www.shadertoy.com/" target="_blank" rel="noopener noreferrer">Shadertoy</a></li>
</ul>
<p>EffectTextureMaker ではその技術をエフェクトのテクスチャ作成に使っています。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="現在作成できる種類は-３１種類">現在作成できる種類は ３１種類<a href="https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker#%E7%8F%BE%E5%9C%A8%E4%BD%9C%E6%88%90%E3%81%A7%E3%81%8D%E3%82%8B%E7%A8%AE%E9%A1%9E%E3%81%AF-%EF%BC%93%EF%BC%91%E7%A8%AE%E9%A1%9E" class="hash-link" aria-label="現在作成できる種類は ３１種類 への直接リンク" title="現在作成できる種類は ３１種類 への直接リンク">​</a></h2>
<p><img loading="lazy" alt="001" src="https://mebiusbox.github.io/assets/images/2017-01-06-EffectTextureMaker-001-a4c8d0027144eb7ec18350c8b54140a1.png" width="768" height="768" class="img_ev3q"></p>
<p>パラメータを調整することで、形を変えることが出来たり、アニメーションの挙動を変えることが出来ます。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ノーマルマップの作成">ノーマルマップの作成<a href="https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker#%E3%83%8E%E3%83%BC%E3%83%9E%E3%83%AB%E3%83%9E%E3%83%83%E3%83%97%E3%81%AE%E4%BD%9C%E6%88%90" class="hash-link" aria-label="ノーマルマップの作成 への直接リンク" title="ノーマルマップの作成 への直接リンク">​</a></h2>
<p>すべての形状でノーマルマップの作成が出来ます。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="色の調整はカラーバランス">色の調整はカラーバランス<a href="https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker#%E8%89%B2%E3%81%AE%E8%AA%BF%E6%95%B4%E3%81%AF%E3%82%AB%E3%83%A9%E3%83%BC%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B9" class="hash-link" aria-label="色の調整はカラーバランス への直接リンク" title="色の調整はカラーバランス への直接リンク">​</a></h2>
<p>カラーバランスはシャドウ、中間、ハイライト部分ごとに色を調整することが出来ます。
すべての種類はグレイスケールですが、一部の種類は独自の色を持っているものもあり、パラメータで調整することが出来ます。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="テクスチャの保存">テクスチャの保存<a href="https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%81%AE%E4%BF%9D%E5%AD%98" class="hash-link" aria-label="テクスチャの保存 への直接リンク" title="テクスチャの保存 への直接リンク">​</a></h2>
<p>テクスチャとして保存する場合はブラウザの画像保存機能を使います。そのため、画像フォーマットはブラウザがサポートしている形式になります。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="スプライトシートの作成">スプライトシートの作成<a href="https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker#%E3%82%B9%E3%83%97%E3%83%A9%E3%82%A4%E3%83%88%E3%82%B7%E3%83%BC%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90" class="hash-link" aria-label="スプライトシートの作成 への直接リンク" title="スプライトシートの作成 への直接リンク">​</a></h2>
<p>爆発などのテクスチャはスプライトシートのような連続した画像を並べて作成します。
このスプライトシートの作成機能も備わっています。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="今後の予定など">今後の予定など<a href="https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker#%E4%BB%8A%E5%BE%8C%E3%81%AE%E4%BA%88%E5%AE%9A%E3%81%AA%E3%81%A9" class="hash-link" aria-label="今後の予定など への直接リンク" title="今後の予定など への直接リンク">​</a></h2>
<ul>
<li>似たようなパラメータ名が多く混乱しやすいため、一部のパラメータは共通化したいです。</li>
<li>カラーバランスはシャドウ、中間、ハイライト部分で調整が可能ですが、調整が難しい。トーンカーブもあるといいかも。</li>
<li>種類を増やす。ノイズや歪みなど</li>
<li>ヘルプの作成</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="最後に">最後に<a href="https://mebiusbox.github.io/blog/2017/01/06/EffectTextureMaker#%E6%9C%80%E5%BE%8C%E3%81%AB" class="hash-link" aria-label="最後に への直接リンク" title="最後に への直接リンク">​</a></h2>
<p>何か要望があればご連絡ください。</p>]]></content>
        <author>
            <name>mebiusbox</name>
            <uri>https://github.com/mebiusbox</uri>
        </author>
        <category label="software" term="software"/>
    </entry>
</feed>